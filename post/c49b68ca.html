<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-simple.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"tigercoll.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Day009：安全协议与加密 - 证书与信任链 日期：2026-01-02 周次：第 2 周  学习目标学完今天你应该能做到：  说清 证书（X.509）在证明什么：证明“某个公钥属于某个域名&#x2F;组织”，并由谁背书 说清 CA&#x2F;中间证书&#x2F;根证书 的角色，以及“链验证”为什么能建立信任 能用 Windows 自带工具（无需 OpenSSL）拿到一个站点证书，并提取关键字段">
<meta property="og:type" content="article">
<meta property="og:title" content="Day009：安全协议与加密 - 证书与信任链">
<meta property="og:url" content="https://tigercoll.top/post/c49b68ca.html">
<meta property="og:site_name" content="Tigercoll&#39;s Blog">
<meta property="og:description" content="Day009：安全协议与加密 - 证书与信任链 日期：2026-01-02 周次：第 2 周  学习目标学完今天你应该能做到：  说清 证书（X.509）在证明什么：证明“某个公钥属于某个域名&#x2F;组织”，并由谁背书 说清 CA&#x2F;中间证书&#x2F;根证书 的角色，以及“链验证”为什么能建立信任 能用 Windows 自带工具（无需 OpenSSL）拿到一个站点证书，并提取关键字段">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2026-01-01T16:00:00.000Z">
<meta property="article:modified_time" content="2026-01-01T16:00:00.000Z">
<meta property="article:author" content="Tigercoll">
<meta property="article:tag" content="网络">
<meta property="article:tag" content="安全">
<meta property="article:tag" content="学习计划">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://tigercoll.top/post/c49b68ca.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://tigercoll.top/post/c49b68ca.html","path":"post/c49b68ca.html","title":"Day009：安全协议与加密 - 证书与信任链"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Day009：安全协议与加密 - 证书与信任链 | Tigercoll's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Tigercoll's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>
	
      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Day009%EF%BC%9A%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%8A%A0%E5%AF%86-%E8%AF%81%E4%B9%A6%E4%B8%8E%E4%BF%A1%E4%BB%BB%E9%93%BE"><span class="nav-number">1.</span> <span class="nav-text">Day009：安全协议与加密 - 证书与信任链</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="nav-number">1.1.</span> <span class="nav-text">学习目标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9"><span class="nav-number">1.2.</span> <span class="nav-text">学习内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%B8%8F%E2%83%A3-%E8%AF%81%E4%B9%A6%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%88X-509-%E7%9A%84%E4%B8%80%E5%8F%A5%E8%AF%9D%E5%AE%9A%E4%B9%89%EF%BC%89"><span class="nav-number">1.2.1.</span> <span class="nav-text">1️⃣ 证书到底是什么（X.509 的一句话定义）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%B8%8F%E2%83%A3-CN%E3%80%81SAN%E3%80%81Key-Usage%EF%BC%9A%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%88%E9%9D%A2%E8%AF%95-x2F-%E5%AE%9E%E6%88%98%E9%AB%98%E9%A2%91%EF%BC%89"><span class="nav-number">1.2.2.</span> <span class="nav-text">2️⃣ CN、SAN、Key Usage：最常用的字段（面试&#x2F;实战高频）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%EF%B8%8F%E2%83%A3-%E8%AF%81%E4%B9%A6%E9%93%BE%EF%BC%88Chain%EF%BC%89-x2F-%E4%BF%A1%E4%BB%BB%E9%93%BE%EF%BC%88Trust-Chain%EF%BC%89%E6%80%8E%E4%B9%88%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.2.3.</span> <span class="nav-text">3️⃣ 证书链（Chain）&#x2F;信任链（Trust Chain）怎么工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%EF%B8%8F%E2%83%A3-Windows-%E4%BF%A1%E4%BB%BB%E5%BA%93%EF%BC%88%E4%BD%A0%E5%8F%AA%E8%A6%81%E7%9F%A5%E9%81%93%E8%BF%99%E5%87%A0%E7%82%B9%EF%BC%89"><span class="nav-number">1.2.4.</span> <span class="nav-text">3.1️⃣ Windows 信任库（你只要知道这几点）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%EF%B8%8F%E2%83%A3-%E6%92%A4%E9%94%80%EF%BC%9ACRL-x2F-OCSP%EF%BC%88%E4%BD%A0%E9%9C%80%E8%A6%81%E8%AE%B0%E4%BD%8F%E7%9A%84%E7%BB%93%E8%AE%BA%EF%BC%89"><span class="nav-number">1.2.5.</span> <span class="nav-text">4️⃣ 撤销：CRL &#x2F; OCSP（你需要记住的结论）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%EF%B8%8F%E2%83%A3-%E7%9C%8B%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8-x2F-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8A%A5%E9%94%99%E6%97%B6%EF%BC%8C%E6%80%8E%E4%B9%88%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D%E5%8E%9F%E5%9B%A0"><span class="nav-number">1.2.6.</span> <span class="nav-text">5️⃣ 看到浏览器&#x2F;命令行报错时，怎么快速定位原因</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E4%BB%BB%E5%8A%A1%EF%BC%88%E5%90%88%E6%B3%95%E6%8E%88%E6%9D%83%E8%8C%83%E5%9B%B4%E5%86%85%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">实践任务（合法授权范围内）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-1%EF%BC%88%E6%97%A0%E9%9C%80-OpenSSL%EF%BC%89%EF%BC%9A%E7%94%A8-curl-%E6%8A%93%E5%8F%96%E6%8F%A1%E6%89%8B%E4%B8%8E%E8%AF%81%E4%B9%A6%E4%BF%A1%E6%81%AF"><span class="nav-number">1.3.1.</span> <span class="nav-text">任务 1（无需 OpenSSL）：用 curl 抓取握手与证书信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-2%EF%BC%88%E6%97%A0%E9%9C%80-OpenSSL%EF%BC%89%EF%BC%9A%E7%94%A8-PowerShell-%E8%8E%B7%E5%8F%96%E7%AB%99%E7%82%B9%E8%AF%81%E4%B9%A6%E5%B9%B6%E5%AF%BC%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.2.</span> <span class="nav-text">任务 2（无需 OpenSSL）：用 PowerShell 获取站点证书并导出到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-3%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%8C%E6%9C%89-OpenSSL-%E6%97%B6%EF%BC%89%EF%BC%9A%E6%9F%A5%E7%9C%8B%E9%93%BE%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C"><span class="nav-number">1.3.3.</span> <span class="nav-text">任务 3（可选，有 OpenSSL 时）：查看链与验证结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-4%EF%BC%88%E4%B8%8E-Wireshark-%E8%81%94%E5%8A%A8%EF%BC%89%EF%BC%9A%E4%BB%8E%E6%8A%93%E5%8C%85%E9%87%8C%E5%AF%B9%E5%BA%94%E5%88%B0%E2%80%9C%E8%AF%81%E4%B9%A6%E9%93%BE%E2%80%9D"><span class="nav-number">1.3.4.</span> <span class="nav-text">任务 4（与 Wireshark 联动）：从抓包里对应到“证书链”</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A9%E5%9B%BA%E7%BB%83%E4%B9%A0%EF%BC%88%E9%A2%98%E4%B8%8E%E5%A4%8D%E7%9B%98%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">巩固练习（题与复盘）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE-1%EF%BC%9A%E4%B8%BA%E4%BD%95%E4%B8%8D%E5%86%8D%E4%BD%BF%E7%94%A8%E2%80%9C%E4%BB%85-CN%E2%80%9D%E5%81%9A%E5%9F%9F%E5%90%8D%E5%8C%B9%E9%85%8D%EF%BC%9F"><span class="nav-number">1.4.1.</span> <span class="nav-text">题目 1：为何不再使用“仅 CN”做域名匹配？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE-2%EF%BC%9A%E9%93%BE%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%E7%9A%84-3-%E4%B8%AA%E5%85%B8%E5%9E%8B%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">1.4.2.</span> <span class="nav-text">题目 2：链验证失败的 3 个典型原因是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9A%E7%BB%99%E5%AE%9A%E8%AF%81%E4%B9%A6%EF%BC%8C%E6%8C%87%E5%87%BA%E6%9C%89%E6%95%88%E6%9C%9F%E4%B8%8E%E7%94%A8%E9%80%94"><span class="nav-number">1.4.3.</span> <span class="nav-text">练习：给定证书，指出有效期与用途</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E6%A0%87%E5%87%86%EF%BC%88%E8%BE%BE%E6%88%90%E5%88%A4%E5%AE%9A%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">评估标准（达成判定）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%88%90%E6%9E%9C%E8%BE%BE%E6%88%90%E6%83%85%E5%86%B5%EF%BC%88%E7%94%B1%E5%AD%A6%E4%B9%A0%E8%80%85%E5%A1%AB%E5%86%99%EF%BC%89"><span class="nav-number">1.6.</span> <span class="nav-text">学习成果达成情况（由学习者填写）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%AA%E5%9B%BE%E4%B8%8E%E8%AF%81%E6%8D%AE"><span class="nav-number">1.6.1.</span> <span class="nav-text">截图与证据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%91%BD%E4%BB%A4%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="nav-number">1.6.2.</span> <span class="nav-text">关键命令与输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%8D%E6%80%9D"><span class="nav-number">1.6.3.</span> <span class="nav-text">结论与反思</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E5%90%AB%E6%80%9D%E8%B7%AF%EF%BC%8C%E9%9B%86%E4%B8%AD%E4%BD%9C%E7%AD%94%EF%BC%89"><span class="nav-number">1.7.</span> <span class="nav-text">参考答案（含思路，集中作答）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE-1%EF%BC%9A%E4%B8%BA%E4%BD%95%E4%B8%8D%E5%86%8D%E4%BD%BF%E7%94%A8%E2%80%9C%E4%BB%85-CN%E2%80%9D%E5%81%9A%E5%9F%9F%E5%90%8D%E5%8C%B9%E9%85%8D%EF%BC%9F-1"><span class="nav-number">1.7.1.</span> <span class="nav-text">题目 1：为何不再使用“仅 CN”做域名匹配？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE-2%EF%BC%9A%E9%93%BE%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%E7%9A%84-3-%E4%B8%AA%E5%85%B8%E5%9E%8B%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F-1"><span class="nav-number">1.7.2.</span> <span class="nav-text">题目 2：链验证失败的 3 个典型原因是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9A%E7%BB%99%E5%AE%9A%E8%AF%81%E4%B9%A6%EF%BC%8C%E6%8C%87%E5%87%BA%E6%9C%89%E6%95%88%E6%9C%9F%E4%B8%8E%E7%94%A8%E9%80%94-1"><span class="nav-number">1.7.3.</span> <span class="nav-text">练习：给定证书，指出有效期与用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E7%9B%98%E9%A2%98%EF%BC%88%E8%A1%94%E6%8E%A5-Day010%EF%BC%89%EF%BC%9A%E4%BD%A0%E6%98%8E%E5%A4%A9%E6%9C%80%E6%83%B3%E5%B8%A6%E7%9D%80%E5%8E%BB%E9%AA%8C%E8%AF%81%E7%9A%84%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">1.7.4.</span> <span class="nav-text">复盘题（衔接 Day010）：你明天最想带着去验证的一个问题是什么？</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tigercoll"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Tigercoll</p>
  <div class="site-description" itemprop="description">万丈高楼平地起,勿在浮沙筑高台</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags">
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Tigercoll" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Tigercoll" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Tigercoll" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tigercoll.top/post/c49b68ca.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Tigercoll">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tigercoll's Blog">
      <meta itemprop="description" content="万丈高楼平地起,勿在浮沙筑高台">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Day009：安全协议与加密 - 证书与信任链 | Tigercoll's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Day009：安全协议与加密 - 证书与信任链
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2026-01-02 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-02T00:00:00+08:00">2026-01-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="Day009：安全协议与加密-证书与信任链"><a href="#Day009：安全协议与加密-证书与信任链" class="headerlink" title="Day009：安全协议与加密 - 证书与信任链"></a>Day009：安全协议与加密 - 证书与信任链</h1><ul>
<li>日期：2026-01-02</li>
<li>周次：第 2 周</li>
</ul>
<h2 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h2><p>学完今天你应该能做到：</p>
<ul>
<li>说清 <strong>证书（X.509）在证明什么</strong>：证明“某个公钥属于某个域名&#x2F;组织”，并由谁背书</li>
<li>说清 <strong>CA&#x2F;中间证书&#x2F;根证书</strong> 的角色，以及“链验证”为什么能建立信任</li>
<li>能用 <strong>Windows 自带工具</strong>（无需 OpenSSL）拿到一个站点证书，并提取关键字段：SAN、Issuer、Validity、Key Usage</li>
<li>（可选）会用 <strong>OpenSSL</strong> 做同样的检查，并理解 <code>verify</code>&#x2F;<code>s_client</code> 的输出含义</li>
<li>能列出 3 类常见失败原因：<strong>域名不匹配 &#x2F; 链不完整或不被信任 &#x2F; 证书过期或被撤销（策略相关）</strong></li>
</ul>
<span id="more"></span>

<h2 id="学习内容"><a href="#学习内容" class="headerlink" title="学习内容"></a>学习内容</h2><h3 id="1️⃣-证书到底是什么（X-509-的一句话定义）"><a href="#1️⃣-证书到底是什么（X-509-的一句话定义）" class="headerlink" title="1️⃣ 证书到底是什么（X.509 的一句话定义）"></a>1️⃣ 证书到底是什么（X.509 的一句话定义）</h3><p>证书可以理解为：</p>
<ul>
<li><strong>一张“公钥身份证”</strong>：把 <em>主体身份（域名&#x2F;组织）</em> 和 <em>公钥</em> 绑定起来</li>
<li>由 <strong>签发者（Issuer，通常是 CA）</strong> 用自己的私钥签名背书</li>
</ul>
<p>你真正验证的不是“证书长得像不像”，而是：</p>
<ol>
<li>证书上的域名是不是我访问的域名（SAN 优先）</li>
<li>证书是否在有效期内</li>
<li>颁发者是否可信（能不能一路追溯到受信任的根 CA）</li>
</ol>
<h3 id="2️⃣-CN、SAN、Key-Usage：最常用的字段（面试-x2F-实战高频）"><a href="#2️⃣-CN、SAN、Key-Usage：最常用的字段（面试-x2F-实战高频）" class="headerlink" title="2️⃣ CN、SAN、Key Usage：最常用的字段（面试&#x2F;实战高频）"></a>2️⃣ CN、SAN、Key Usage：最常用的字段（面试&#x2F;实战高频）</h3><ul>
<li><strong>Subject</strong>：证书主体，谁的证书</li>
<li><strong>CN（Common Name）</strong>：早期用来放域名，但现在 <strong>不再推荐只靠 CN 匹配</strong></li>
<li><strong>SAN（Subject Alternative Name）</strong>：现代浏览器匹配域名的主要依据（可包含多个域名&#x2F;通配符）</li>
<li><strong>Issuer</strong>：谁签发的（中间 CA &#x2F; 根 CA）</li>
<li><strong>Validity</strong>：Not Before &#x2F; Not After（时间不准会导致校验失败）</li>
<li><strong>Key Usage &#x2F; Extended Key Usage</strong>：这把公钥允许干什么（如 Server Authentication）</li>
</ul>
<p>补充（够用就行，不需要背 RFC）：</p>
<ul>
<li><strong>Serial Number（序列号）</strong>：CA 给这张证书的“身份证号”，撤销&#x2F;审计会用到</li>
<li><strong>Signature Algorithm（签名算法）</strong>：这张证书是如何被上级签名的（例如 <code>sha256RSA</code>）</li>
<li><strong>Public Key（公钥）</strong>：真正用于握手密钥协商&#x2F;验证签名的那把公钥</li>
<li><strong>Basic Constraints</strong>：是否允许充当 CA（叶子证书一般 <code>CA:FALSE</code>）</li>
</ul>
<p>域名匹配“怎么比对”（最常用规则）：</p>
<ul>
<li><strong>优先看 SAN</strong>：SAN 里只要有一个名字能匹配访问域名即可</li>
<li><strong>通配符</strong>：<code>*.example.com</code> 只匹配一级子域（如 <code>a.example.com</code>），不匹配 <code>a.b.example.com</code></li>
<li><strong>IP 访问</strong>：如果你用 IP 访问（例如 <code>https://1.2.3.4</code>），证书必须在 SAN 里有对应 IP 才算匹配</li>
</ul>
<h3 id="3️⃣-证书链（Chain）-x2F-信任链（Trust-Chain）怎么工作"><a href="#3️⃣-证书链（Chain）-x2F-信任链（Trust-Chain）怎么工作" class="headerlink" title="3️⃣ 证书链（Chain）&#x2F;信任链（Trust Chain）怎么工作"></a>3️⃣ 证书链（Chain）&#x2F;信任链（Trust Chain）怎么工作</h3><p>基本结构（从服务器发给客户端的常见顺序）：</p>
<ul>
<li>站点证书（Leaf &#x2F; End-Entity）</li>
<li>1~N 个中间证书（Intermediate CA）</li>
<li>（根证书 Root CA <strong>通常不会</strong>由服务器发给你，客户端系统里本来就有）</li>
</ul>
<p>链验证的核心逻辑：</p>
<ul>
<li>用“上一级证书”的公钥，验证“下一级证书”的签名是否正确</li>
<li>一直验证到“我本机信任的根 CA”则信任成立</li>
</ul>
<p>把“链验证”拆成 3 句更容易理解的话：</p>
<ol>
<li><p><strong>服务器把它的证书（leaf）给你</strong>，并通常附带 1~N 张中间证书</p>
</li>
<li><p><strong>你用中间证书的公钥去验证 leaf 的签名</strong>；再用更上一级验证中间证书……</p>
</li>
<li><p>直到能拼出一条路，走到你系统里“已经信任”的根证书（Root CA），这条链才算闭合。</p>
</li>
</ol>
<blockquote>
<p>为什么根证书通常不由服务器发？因为“根证书是否可信”是由你的系统&#x2F;浏览器预置的信任库决定的，服务器自己说“我信我自己”没意义。</p>
</blockquote>
<h3 id="3-1️⃣-Windows-信任库（你只要知道这几点）"><a href="#3-1️⃣-Windows-信任库（你只要知道这几点）" class="headerlink" title="3.1️⃣ Windows 信任库（你只要知道这几点）"></a>3.1️⃣ Windows 信任库（你只要知道这几点）</h3><p>在 Windows 上，证书“信不信”主要看系统证书存储（证书管理器）：</p>
<ul>
<li><strong>受信任的根证书颁发机构（Trusted Root Certification Authorities）</strong>：根 CA 在这里 → 默认信任</li>
<li><strong>中间证书颁发机构（Intermediate Certification Authorities）</strong>：中间 CA 在这里，可帮助链构建</li>
<li><strong>个人（Personal）</strong>：你自己的证书&#x2F;私钥（比如客户端证书）</li>
</ul>
<p>打开方式（两种都行）：</p>
<ul>
<li>运行：<code>certmgr.msc</code>（当前用户）</li>
<li>运行：<code>mmc</code> → 添加管理单元（Certificates）→ 选择“计算机帐户”（更接近系统层）</li>
</ul>
<h3 id="4️⃣-撤销：CRL-x2F-OCSP（你需要记住的结论）"><a href="#4️⃣-撤销：CRL-x2F-OCSP（你需要记住的结论）" class="headerlink" title="4️⃣ 撤销：CRL &#x2F; OCSP（你需要记住的结论）"></a>4️⃣ 撤销：CRL &#x2F; OCSP（你需要记住的结论）</h3><ul>
<li><strong>CRL</strong>：证书撤销列表（列表可能大、更新慢）</li>
<li><strong>OCSP</strong>：在线查询某张证书是否被撤销（受网络&#x2F;策略影响）</li>
<li>实际是否“强制检查撤销”，取决于浏览器&#x2F;系统&#x2F;组织策略，所以现实里常见的失败点仍是：域名&#x2F;有效期&#x2F;链不完整。</li>
</ul>
<p>你可以把撤销当成“加分项”，先把下面 3 个最常见的失败点练熟：</p>
<ol>
<li>域名不匹配（SAN）</li>
<li>证书过期&#x2F;时间不准（Validity）</li>
<li>链构建失败（缺中间&#x2F;不受信任根）</li>
</ol>
<h3 id="5️⃣-看到浏览器-x2F-命令行报错时，怎么快速定位原因"><a href="#5️⃣-看到浏览器-x2F-命令行报错时，怎么快速定位原因" class="headerlink" title="5️⃣ 看到浏览器&#x2F;命令行报错时，怎么快速定位原因"></a>5️⃣ 看到浏览器&#x2F;命令行报错时，怎么快速定位原因</h3><p>把问题按层拆开（建议照这个顺序排查）：</p>
<ol>
<li><strong>连得上吗</strong>：DNS&#x2F;TCP 443 是否通（连不上就别谈证书）</li>
<li><strong>证书是不是这家网站的</strong>：SAN 是否匹配你访问的域名</li>
<li><strong>证书还活着吗</strong>：NotBefore&#x2F;NotAfter 是否有效，系统时间是否正确</li>
<li><strong>链闭合了吗</strong>：有没有中间证书、根是否受信任（企业内网常见）</li>
<li><strong>策略类</strong>：是否强制 OCSP&#x2F;CRL、是否需要客户端证书（mTLS）</li>
</ol>
<p>常见现象 → 可能原因（够用版）：</p>
<ul>
<li>“证书不受信任&#x2F;Unknown CA”：缺根 CA 或企业 CA 未导入</li>
<li>“证书链不完整&#x2F;Unable to get local issuer certificate”：服务器没发全中间证书（或客户端缺中间）</li>
<li>“域名不匹配&#x2F;Name mismatch”：SAN 不包含该域名（或你用 IP 访问）</li>
<li>“证书过期&#x2F;NotAfter”：证书过期或系统时间不准</li>
</ul>
<h2 id="实践任务（合法授权范围内）"><a href="#实践任务（合法授权范围内）" class="headerlink" title="实践任务（合法授权范围内）"></a>实践任务（合法授权范围内）</h2><blockquote>
<p>目标：用“无需 OpenSSL”也能完成证书关键字段核验；有 OpenSSL 更好。</p>
</blockquote>
<h3 id="任务-1（无需-OpenSSL）：用-curl-抓取握手与证书信息"><a href="#任务-1（无需-OpenSSL）：用-curl-抓取握手与证书信息" class="headerlink" title="任务 1（无需 OpenSSL）：用 curl 抓取握手与证书信息"></a>任务 1（无需 OpenSSL）：用 curl 抓取握手与证书信息</h3><ol>
<li>选一个 HTTPS 站点（示例：<code>https://www.bing.com/</code>）</li>
<li>执行（只请求头，带详细信息）：</li>
</ol>
<p>说明：在 Windows PowerShell 里，<code>curl.exe</code> 的进度条&#x2F;部分输出可能会被显示为 <code>NativeCommandError</code>，看起来像“报错”，但通常并不影响你拿到 TLS&#x2F;HTTP 头信息。</p>
<p>更稳定的写法（不显示进度条，只看关键信息）：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl.exe <span class="literal">-I</span> <span class="literal">--silent</span> <span class="literal">--show-error</span> <span class="literal">--location</span> https://www.bing.com/</span><br></pre></td></tr></table></figure>

<p>如果你还想看更详细的协商信息，再用：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl.exe <span class="literal">-Iv</span> <span class="literal">--silent</span> <span class="literal">--show-error</span> https://www.bing.com/</span><br></pre></td></tr></table></figure>

<p>你要记录到“学习成果”里的信息（不同 Windows 版本输出略不同，能看到多少写多少）：</p>
<ul>
<li>TLS 版本&#x2F;协商摘要（如有）</li>
<li>证书相关提示（如有）</li>
<li>重定向位置（如有）</li>
</ul>
<h3 id="任务-2（无需-OpenSSL）：用-PowerShell-获取站点证书并导出到文件"><a href="#任务-2（无需-OpenSSL）：用-PowerShell-获取站点证书并导出到文件" class="headerlink" title="任务 2（无需 OpenSSL）：用 PowerShell 获取站点证书并导出到文件"></a>任务 2（无需 OpenSSL）：用 PowerShell 获取站点证书并导出到文件</h3><p>下面脚本会连接站点、取出服务器证书并导出为 <code>.cer</code>（DER），然后用系统工具查看：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$hostName</span> = <span class="string">&quot;www.bing.com&quot;</span></span><br><span class="line"><span class="variable">$tcp</span> = <span class="built_in">New-Object</span> System.Net.Sockets.TcpClient(<span class="variable">$hostName</span>, <span class="number">443</span>)</span><br><span class="line"><span class="variable">$ssl</span> = <span class="built_in">New-Object</span> System.Net.Security.SslStream(<span class="variable">$tcp</span>.GetStream(), <span class="variable">$false</span>, (&#123;<span class="variable">$true</span>&#125;))</span><br><span class="line"><span class="variable">$ssl</span>.AuthenticateAsClient(<span class="variable">$hostName</span>)</span><br><span class="line"><span class="variable">$cert</span> = <span class="built_in">New-Object</span> System.Security.Cryptography.X509Certificates.X509Certificate2(<span class="variable">$ssl</span>.RemoteCertificate)</span><br><span class="line"><span class="variable">$path</span> = <span class="string">&quot;day009_<span class="variable">$</span>(<span class="variable">$hostName</span>.Replace(&#x27;.&#x27;,&#x27;_&#x27;)).cer&quot;</span></span><br><span class="line">[<span class="type">System.IO.File</span>]::WriteAllBytes(<span class="variable">$path</span>, <span class="variable">$cert</span>.Export([<span class="type">System.Security.Cryptography.X509Certificates.X509ContentType</span>]::Cert))</span><br><span class="line"><span class="variable">$cert</span> | <span class="built_in">Format-List</span> Subject, Issuer, NotBefore, NotAfter, Thumbprint</span><br><span class="line"><span class="built_in">Write-Host</span> <span class="string">&quot;Exported to <span class="variable">$path</span>&quot;</span></span><br><span class="line"><span class="variable">$ssl</span>.Dispose(); <span class="variable">$tcp</span>.Close()</span><br></pre></td></tr></table></figure>

<p>接着查看证书详细信息（系统自带）：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil <span class="literal">-dump</span> .\day009_www_bing_com.cer</span><br></pre></td></tr></table></figure>

<p>你重点找这些字段并摘录：</p>
<ul>
<li>Subject &#x2F; Issuer</li>
<li>Validity（NotBefore&#x2F;NotAfter）</li>
<li>SAN（Subject Alternative Name）</li>
<li>EKU（如 Server Authentication）</li>
</ul>
<h3 id="任务-3（可选，有-OpenSSL-时）：查看链与验证结果"><a href="#任务-3（可选，有-OpenSSL-时）：查看链与验证结果" class="headerlink" title="任务 3（可选，有 OpenSSL 时）：查看链与验证结果"></a>任务 3（可选，有 OpenSSL 时）：查看链与验证结果</h3><ol>
<li>直接看握手与证书链：</li>
</ol>
<ul>
<li><code>openssl s_client -connect www.bing.com:443 -servername www.bing.com -showcerts</code></li>
</ul>
<ol start="2">
<li>验证链（需要你把中间证书&#x2F;根证书准备成文件时才更完整）：</li>
</ol>
<ul>
<li><code>openssl verify -CAfile &lt;root_or_bundle.pem&gt; &lt;leaf.pem&gt;</code></li>
</ul>
<p>你要理解的输出关键词：</p>
<ul>
<li><code>Verify return code: 0 (ok)</code>：链验证通过</li>
<li>其他非 0：要么链不完整、要么不受信任、要么用途&#x2F;名称&#x2F;时间有问题</li>
</ul>
<h3 id="任务-4（与-Wireshark-联动）：从抓包里对应到“证书链”"><a href="#任务-4（与-Wireshark-联动）：从抓包里对应到“证书链”" class="headerlink" title="任务 4（与 Wireshark 联动）：从抓包里对应到“证书链”"></a>任务 4（与 Wireshark 联动）：从抓包里对应到“证书链”</h3><p>在 Wireshark 里过滤：</p>
<ul>
<li><code>tls.handshake.type == 11</code>（Certificate）</li>
</ul>
<p>找到 <code>Certificate</code> 消息后：</p>
<ul>
<li>看证书列表里有几张（leaf + intermediates）</li>
<li>记录 leaf 的 Subject &#x2F; Issuer &#x2F; Validity</li>
<li>对照你在 PowerShell&#x2F;certutil 中看到的字段是否一致</li>
</ul>
<h2 id="巩固练习（题与复盘）"><a href="#巩固练习（题与复盘）" class="headerlink" title="巩固练习（题与复盘）"></a>巩固练习（题与复盘）</h2><h3 id="题目-1：为何不再使用“仅-CN”做域名匹配？"><a href="#题目-1：为何不再使用“仅-CN”做域名匹配？" class="headerlink" title="题目 1：为何不再使用“仅 CN”做域名匹配？"></a>题目 1：为何不再使用“仅 CN”做域名匹配？</h3><p>要点：</p>
<ul>
<li>现代证书允许一个证书覆盖多个域名&#x2F;通配符，<strong>SAN 才是标准位置</strong></li>
<li>浏览器实现与标准（RFC&#x2F;CA&#x2F;B Baseline Requirements）逐步要求以 SAN 为准</li>
<li>只看 CN 容易产生兼容性与安全边界问题</li>
</ul>
<p>一句话回答模板：</p>
<ul>
<li><strong>现在以 SAN 为准</strong>，CN 主要是历史兼容字段，不能再作为唯一匹配依据。</li>
</ul>
<p>解题思路（你可以照着套）：</p>
<ol>
<li>先说“现代证书的规范位置在哪” → SAN</li>
<li>再说“CN 的定位是什么” → 历史兼容</li>
<li>最后给结论 → 只看 CN 不可靠&#x2F;不符合现代验证逻辑</li>
</ol>
<h3 id="题目-2：链验证失败的-3-个典型原因是什么？"><a href="#题目-2：链验证失败的-3-个典型原因是什么？" class="headerlink" title="题目 2：链验证失败的 3 个典型原因是什么？"></a>题目 2：链验证失败的 3 个典型原因是什么？</h3><ul>
<li>缺中间证书（服务器没发全）</li>
<li>客户端缺根 CA&#x2F;企业 CA（不受信任）</li>
<li>时间不准或证书过期（NotBefore&#x2F;NotAfter）</li>
</ul>
<p>解题思路：把“链验证”拆成 3 次检查，然后每一步给一个会失败的点：</p>
<ol>
<li>leaf 是否归属这个域名（SAN）</li>
<li>leaf 是否在有效期内（Validity）</li>
<li>leaf 的签名能不能一路验证到受信任根（链&#x2F;信任库）</li>
</ol>
<p>标准答案（直接写在笔记里也行）：</p>
<ol>
<li><strong>缺中间证书</strong>（服务器未发送完整链，导致无法构建到根）</li>
<li><strong>根不受信任</strong>（客户端缺根 CA&#x2F;企业 CA 未导入信任库）</li>
<li><strong>时间&#x2F;有效期问题</strong>（证书过期或系统时间不正确）</li>
</ol>
<h3 id="练习：给定证书，指出有效期与用途"><a href="#练习：给定证书，指出有效期与用途" class="headerlink" title="练习：给定证书，指出有效期与用途"></a>练习：给定证书，指出有效期与用途</h3><p>从 <code>certutil -dump</code> 或证书查看器里找到：</p>
<ul>
<li>NotBefore &#x2F; NotAfter</li>
<li>Enhanced Key Usage（Server Authentication &#x2F; Client Authentication 等）</li>
</ul>
<p>解题思路：你只要在输出里“定位两个区域”就够了：</p>
<ol>
<li>找到 <code>NotBefore</code> 与 <code>NotAfter</code> 两行（有效期）</li>
<li>找到 <code>Enhanced Key Usage</code>（用途）</li>
</ol>
<p>参考答案模板（把括号里的内容替换成你看到的）：</p>
<ul>
<li>有效期：从 <strong>(NotBefore 时间)</strong> 到 <strong>(NotAfter 时间)</strong></li>
<li>用途（EKU）：包含 **(Server Authentication&#x2F;Client Authentication&#x2F;… )**，说明这张证书用于 <strong>(服务器认证&#x2F;客户端认证&#x2F;… )</strong></li>
</ul>
<h2 id="评估标准（达成判定）"><a href="#评估标准（达成判定）" class="headerlink" title="评估标准（达成判定）"></a>评估标准（达成判定）</h2><ul>
<li>能说清“证书证明的是什么”，以及 CA&#x2F;中间&#x2F;根的关系</li>
<li>能从证书中定位并解释：SAN、Issuer、Validity、EKU&#x2F;Key Usage（至少 4 项）</li>
<li>能用 Windows 工具导出并 <code>certutil -dump</code> 查看证书</li>
<li>能给出链验证失败的分层排查思路（链不完整 &#x2F; 不受信任 &#x2F; 时间与域名）</li>
</ul>
<h2 id="学习成果达成情况（由学习者填写）"><a href="#学习成果达成情况（由学习者填写）" class="headerlink" title="学习成果达成情况（由学习者填写）"></a>学习成果达成情况（由学习者填写）</h2><h3 id="截图与证据"><a href="#截图与证据" class="headerlink" title="截图与证据"></a>截图与证据</h3><ul>
<li><code>certutil -dump</code> 关键字段截图或复制粘贴：<ul>
<li>Subject：</li>
<li>Issuer：</li>
<li>Validity（NotBefore&#x2F;NotAfter）：</li>
<li>SAN：</li>
<li>EKU：</li>
</ul>
</li>
</ul>
<h3 id="关键命令与输出"><a href="#关键命令与输出" class="headerlink" title="关键命令与输出"></a>关键命令与输出</h3><ul>
<li>命令：<ul>
<li><code>curl.exe -Iv https://...</code></li>
<li>PowerShell 导出证书脚本（是否成功导出 <code>.cer</code>）：</li>
<li><code>certutil -dump .\xxx.cer</code></li>
</ul>
</li>
<li>输出关键行摘录：<ul>
<li>证书指纹（Thumbprint）：</li>
<li>SAN 关键行：</li>
<li>Validity：</li>
</ul>
</li>
</ul>
<h3 id="结论与反思"><a href="#结论与反思" class="headerlink" title="结论与反思"></a>结论与反思</h3><ul>
<li>今天你确认到的 1 个事实证据（来自输出，不是“感觉”）：</li>
<li>你遇到的 1 个坑（例如：时间不准&#x2F;站点重定向&#x2F;输出差异）：</li>
<li>明天（Day010）你最想带着去验证的一个问题：</li>
</ul>
<p>（示例填写，给自己一个可参考的“完整答案”）</p>
<ul>
<li>今天你确认到的 1 个事实证据：<ul>
<li>我用 PowerShell 导出 <code>www.bing.com</code> 的证书后，看到 <code>Subject=CN=www.bing.com</code>，<code>Issuer=Microsoft Azure RSA TLS Issuing CA 04</code>，有效期 <code>NotBefore=2025-12-17</code> 到 <code>NotAfter=2026-06-15</code>（这些字段来自命令输出）。</li>
</ul>
</li>
<li>我遇到的 1 个坑：<ul>
<li>在 Windows PowerShell 里直接跑 <code>curl.exe -Iv</code> 时，进度条&#x2F;部分输出会显示成 <code>NativeCommandError</code>，看起来像失败；改用 <code>curl.exe -I --silent --show-error --location</code> 后信息更干净。</li>
</ul>
</li>
<li>明天最想验证的问题：<ul>
<li>在 Wireshark 的 <code>Certificate</code> 握手里看到的证书列表（leaf + intermediates），是否能和我导出的证书字段一一对应？如果链不完整会在抓包里表现成什么？</li>
</ul>
</li>
</ul>
<hr>
<h2 id="参考答案（含思路，集中作答）"><a href="#参考答案（含思路，集中作答）" class="headerlink" title="参考答案（含思路，集中作答）"></a>参考答案（含思路，集中作答）</h2><blockquote>
<p>说明：下面把本文出现的所有“题目&#x2F;练习”集中给出<strong>思路 + 标准答案</strong>；你做完再回来对照即可。</p>
</blockquote>
<h3 id="题目-1：为何不再使用“仅-CN”做域名匹配？-1"><a href="#题目-1：为何不再使用“仅-CN”做域名匹配？-1" class="headerlink" title="题目 1：为何不再使用“仅 CN”做域名匹配？"></a>题目 1：为何不再使用“仅 CN”做域名匹配？</h3><p><strong>思路</strong>：</p>
<ol>
<li>先讲“现在标准在哪里” → SAN</li>
<li>再讲“CN 的定位” → 历史兼容字段</li>
<li>最后落到结论 → 只看 CN 可能匹配错误&#x2F;不符合现代验证规则</li>
</ol>
<p><strong>标准答案</strong>：</p>
<ul>
<li>现代 TLS&#x2F;浏览器在做主机名验证时，<strong>以证书的 SAN（Subject Alternative Name）为准</strong>；CN（Common Name）主要用于历史兼容，不能再作为唯一依据。</li>
<li>原因是 SAN 才是标准字段，能表达多个域名&#x2F;通配符等场景；只看 CN 会带来兼容性问题，也可能导致验证边界不清。</li>
</ul>
<p><strong>常见误区</strong>：</p>
<ul>
<li>误区：”CN 写了域名就一定能用” → 实际上很多实现会忽略 CN 或只在没有 SAN 时才回退。</li>
</ul>
<h3 id="题目-2：链验证失败的-3-个典型原因是什么？-1"><a href="#题目-2：链验证失败的-3-个典型原因是什么？-1" class="headerlink" title="题目 2：链验证失败的 3 个典型原因是什么？"></a>题目 2：链验证失败的 3 个典型原因是什么？</h3><p><strong>思路</strong>：把链验证拆成“能否构建到根”的过程，分别给出会失败的点：</p>
<ul>
<li>是否能拿到完整链（中间证书）</li>
<li>根是否受信任（信任库）</li>
<li>时间是否有效（有效期&#x2F;系统时间）</li>
</ul>
<p><strong>标准答案</strong>：</p>
<ol>
<li><strong>缺中间证书</strong>：服务器没有把中间证书发全，客户端无法构建到受信任根</li>
<li><strong>根不受信任</strong>：客户端没有对应根 CA（或企业 CA），导致 Unknown CA&#x2F;Untrusted</li>
<li><strong>时间&#x2F;有效期问题</strong>：证书过期、未生效，或客户端系统时间不正确</li>
</ol>
<h3 id="练习：给定证书，指出有效期与用途-1"><a href="#练习：给定证书，指出有效期与用途-1" class="headerlink" title="练习：给定证书，指出有效期与用途"></a>练习：给定证书，指出有效期与用途</h3><p><strong>思路</strong>：只要会在输出里找两块信息即可：</p>
<ul>
<li><code>NotBefore</code>&#x2F;<code>NotAfter</code> → 有效期</li>
<li><code>Enhanced Key Usage (EKU)</code> → 用途</li>
</ul>
<p><strong>标准答案模板（直接替换括号内容）</strong>：</p>
<ul>
<li>有效期：从 <strong>(NotBefore 时间)</strong> 到 <strong>(NotAfter 时间)</strong></li>
<li>用途（EKU）：包含 <strong>(Server Authentication&#x2F;Client Authentication&#x2F;… )</strong></li>
</ul>
<p><strong>举例（示例答案，便于你对照格式）</strong>：</p>
<ul>
<li>有效期：从 <strong>2025-12-17 06:38</strong> 到 <strong>2026-06-15 06:38</strong></li>
<li>用途（EKU）：包含 <strong>Server Authentication</strong>，说明这张证书用于 <strong>服务器身份认证（HTTPS 网站）</strong></li>
</ul>
<h3 id="复盘题（衔接-Day010）：你明天最想带着去验证的一个问题是什么？"><a href="#复盘题（衔接-Day010）：你明天最想带着去验证的一个问题是什么？" class="headerlink" title="复盘题（衔接 Day010）：你明天最想带着去验证的一个问题是什么？"></a>复盘题（衔接 Day010）：你明天最想带着去验证的一个问题是什么？</h3><p><strong>思路</strong>：选一个“能用抓包验证”的问题（能在 Wireshark 里看到证据），而不是抽象问题。</p>
<p><strong>示例答案</strong>：</p>
<ul>
<li>我想验证：当我访问 <code>https://www.bing.com/</code> 时，Wireshark 的 <code>Certificate</code> 握手消息里是否包含中间证书？如果只看到 leaf，没有 intermediate，那么客户端是如何补全链的（AIA 下载&#x2F;系统缓存）？</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="Tigercoll 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"># 网络</a>
              <a href="/tags/%E5%AE%89%E5%85%A8/" rel="tag"># 安全</a>
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="tag"># 学习计划</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/f7258881.html" rel="prev" title="Day008：安全协议与加密 - TLS 概念与握手">
                  <i class="fa fa-chevron-left"></i> Day008：安全协议与加密 - TLS 概念与握手
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/1e53b9d9.html" rel="next" title="Day010：安全协议与加密 - HTTPS 抓包与安全特性">
                  Day010：安全协议与加密 - HTTPS 抓包与安全特性 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zNDY4NC8xMTIyMQ=="></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tigercoll</span>
</div>
<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("04/21/2019 15:54:40");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "等待与你相遇的 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>
-->

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script src="/js/third-party/comments/livere.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true,"react":{"opacity":0.7}}});</script></body>
</html>
