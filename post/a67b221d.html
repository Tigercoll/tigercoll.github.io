<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tigercoll.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>



<link rel="canonical" href="https://tigercoll.top/post/a67b221d.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://tigercoll.top/post/a67b221d.html","path":"post/a67b221d.html","title":"Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º | Tigercoll's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Tigercoll's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>
	
      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Day025%EF%BC%9A%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E4%B8%8E%E5%9F%BA%E7%BA%BF-Web-%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%9A%B4%E9%9C%B2%E9%9D%A2%E4%B8%8E%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.</span> <span class="nav-text">Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="nav-number">1.1.</span> <span class="nav-text">å­¦ä¹ ç›®æ ‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9"><span class="nav-number">1.2.</span> <span class="nav-text">å­¦ä¹ å†…å®¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%B8%8F%E2%83%A3-Web-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%B8%B8%E8%A7%81%E6%9A%B4%E9%9C%B2%E9%9D%A2"><span class="nav-number">1.2.1.</span> <span class="nav-text">1ï¸âƒ£ Web ä¸­é—´ä»¶å¸¸è§æš´éœ²é¢</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-%E7%9B%AE%E5%BD%95%E5%88%97%E5%87%BA%EF%BC%88Directory-Listing%EF%BC%89"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">1.1 ç›®å½•åˆ—å‡ºï¼ˆDirectory Listingï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%EF%BC%88Version-Disclosure%EF%BC%89"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">1.2 ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ï¼ˆVersion Disclosureï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-HTTP-%E6%96%B9%E6%B3%95%E9%99%90%E5%88%B6%EF%BC%88HTTP-Method-Restrictions%EF%BC%89"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">1.3 HTTP æ–¹æ³•é™åˆ¶ï¼ˆHTTP Method Restrictionsï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E5%AE%89%E5%85%A8%E5%93%8D%E5%BA%94%E5%A4%B4%EF%BC%88Security-Response-Headers%EF%BC%89"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">1.4 å®‰å…¨å“åº”å¤´ï¼ˆSecurity Response Headersï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%EF%BC%88Logging%EF%BC%89"><span class="nav-number">1.2.1.5.</span> <span class="nav-text">1.5 æ—¥å¿—é…ç½®ï¼ˆLoggingï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%B8%8F%E2%83%A3-%E5%90%84%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%9B%BA%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.2.</span> <span class="nav-text">2ï¸âƒ£ å„ä¸­é—´ä»¶åŸºç¡€åŠ å›ºé…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-Nginx-%E5%AE%8C%E6%95%B4%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">2.1 Nginx å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-Apache-%E5%AE%8C%E6%95%B4%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">2.2 Apache å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-IIS-%E5%AE%8C%E6%95%B4%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">2.3 IIS å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%EF%B8%8F%E2%83%A3-%E9%AA%8C%E8%AF%81%E5%8A%A0%E5%9B%BA%E6%95%88%E6%9E%9C"><span class="nav-number">1.2.3.</span> <span class="nav-text">3ï¸âƒ£ éªŒè¯åŠ å›ºæ•ˆæœ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-%E4%BD%BF%E7%94%A8-curl-%E6%A3%80%E6%9F%A5%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">3.1 ä½¿ç”¨ curl æ£€æŸ¥å“åº”å¤´</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95%E5%88%97%E5%87%BA"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">3.2 æµ‹è¯•ç›®å½•åˆ—å‡º</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-%E6%B5%8B%E8%AF%95-HTTP-%E6%96%B9%E6%B3%95%E9%99%90%E5%88%B6"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">3.3 æµ‹è¯• HTTP æ–¹æ³•é™åˆ¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">3.4 ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E4%BB%BB%E5%8A%A1%EF%BC%88%E5%90%88%E6%B3%95%E6%8E%88%E6%9D%83%E8%8C%83%E5%9B%B4%E5%86%85%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">å®è·µä»»åŠ¡ï¼ˆåˆæ³•æˆæƒèŒƒå›´å†…ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-1%EF%BC%88%E5%BF%85%E5%81%9A%EF%BC%89%EF%BC%9A%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8D%E9%85%8D%E7%BD%AE%E7%9A%84%E6%9A%B4%E9%9C%B2%E9%9D%A2"><span class="nav-number">1.3.1.</span> <span class="nav-text">ä»»åŠ¡ 1ï¼ˆå¿…åšï¼‰ï¼šæ£€æŸ¥å½“å‰é…ç½®çš„æš´éœ²é¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-2%EF%BC%88%E5%BF%85%E5%81%9A%EF%BC%89%EF%BC%9A%E9%85%8D%E7%BD%AE-Nginx-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.3.2.</span> <span class="nav-text">ä»»åŠ¡ 2ï¼ˆå¿…åšï¼‰ï¼šé…ç½® Nginx å®‰å…¨åŠ å›º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-3%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89%EF%BC%9A%E9%85%8D%E7%BD%AE-Apache-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.3.3.</span> <span class="nav-text">ä»»åŠ¡ 3ï¼ˆè¿›é˜¶ï¼‰ï¼šé…ç½® Apache å®‰å…¨åŠ å›º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-4%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89%EF%BC%9AIIS-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.3.4.</span> <span class="nav-text">ä»»åŠ¡ 4ï¼ˆè¿›é˜¶ï¼‰ï¼šIIS å®‰å…¨åŠ å›º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-5%EF%BC%88%E5%AE%9E%E6%88%98%EF%BC%89%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E5%9F%BA%E7%BA%BF%E6%A3%80%E6%9F%A5%E8%84%9A%E6%9C%AC"><span class="nav-number">1.3.5.</span> <span class="nav-text">ä»»åŠ¡ 5ï¼ˆå®æˆ˜ï¼‰ï¼šè‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥è„šæœ¬</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A9%E5%9B%BA%E7%BB%83%E4%B9%A0%EF%BC%88%E9%A2%98%E4%B8%8E%E5%A4%8D%E7%9B%98%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-1%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E9%9A%90%E8%97%8F%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF%EF%BC%9F"><span class="nav-number">1.4.1.</span> <span class="nav-text">ç»ƒä¹  1ï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-2%EF%BC%9AX-Frame-Options-%E5%A4%B4%E7%9A%84%E4%B8%89%E7%A7%8D%E5%80%BC%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="nav-number">1.4.2.</span> <span class="nav-text">ç»ƒä¹  2ï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-3%EF%BC%9A%E9%85%8D%E7%BD%AE-Content-Security-Policy%EF%BC%88CSP%EF%BC%89"><span class="nav-number">1.4.3.</span> <span class="nav-text">ç»ƒä¹  3ï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-4%EF%BC%9AHTTP-%E7%8A%B6%E6%80%81%E7%A0%81%E4%B8%8E%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.4.4.</span> <span class="nav-text">ç»ƒä¹  4ï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E6%A0%87%E5%87%86%EF%BC%88%E8%BE%BE%E6%88%90%E5%88%A4%E5%AE%9A%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A9%E5%9B%BA%E7%BB%83%E4%B9%A0%EF%BC%88%E9%A2%98%E4%B8%8E%E5%A4%8D%E7%9B%98%EF%BC%89-1"><span class="nav-number">1.6.</span> <span class="nav-text">å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E6%A0%87%E5%87%86%EF%BC%88%E8%BE%BE%E6%88%90%E5%88%A4%E5%AE%9A%EF%BC%89-1"><span class="nav-number">1.7.</span> <span class="nav-text">è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%88%90%E6%9E%9C%E8%BE%BE%E6%88%90%E6%83%85%E5%86%B5%EF%BC%88%E7%94%B1%E5%AD%A6%E4%B9%A0%E8%80%85%E5%A1%AB%E5%86%99%EF%BC%89"><span class="nav-number">1.8.</span> <span class="nav-text">å­¦ä¹ æˆæœè¾¾æˆæƒ…å†µï¼ˆç”±å­¦ä¹ è€…å¡«å†™ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%AA%E5%9B%BE%E4%B8%8E%E8%AF%81%E6%8D%AE"><span class="nav-number">1.8.1.</span> <span class="nav-text">æˆªå›¾ä¸è¯æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%91%BD%E4%BB%A4%E4%B8%8E%E8%BE%93%E5%87%BA%EF%BC%88%E7%B2%98%E8%B4%B4%E5%85%B3%E9%94%AE%E7%89%87%E6%AE%B5%EF%BC%89"><span class="nav-number">1.8.2.</span> <span class="nav-text">å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç²˜è´´å…³é”®ç‰‡æ®µï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%8D%E6%80%9D"><span class="nav-number">1.8.3.</span> <span class="nav-text">ç»“è®ºä¸åæ€</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E4%B8%AD%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E5%90%AB%E6%80%9D%E8%B7%AF%EF%BC%89"><span class="nav-number">1.9.</span> <span class="nav-text">é›†ä¸­å‚è€ƒç­”æ¡ˆï¼ˆå«æ€è·¯ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-1-%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E9%9A%90%E8%97%8F%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF%EF%BC%9F"><span class="nav-number">1.9.1.</span> <span class="nav-text">ç»ƒä¹  1 å‚è€ƒç­”æ¡ˆï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-2-%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%9AX-Frame-Options-%E5%A4%B4%E7%9A%84%E4%B8%89%E7%A7%8D%E5%80%BC%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="nav-number">1.9.2.</span> <span class="nav-text">ç»ƒä¹  2 å‚è€ƒç­”æ¡ˆï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-3-%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%9A%E9%85%8D%E7%BD%AE-Content-Security-Policy%EF%BC%88CSP%EF%BC%89"><span class="nav-number">1.9.3.</span> <span class="nav-text">ç»ƒä¹  3 å‚è€ƒç­”æ¡ˆï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0-4-%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%9AHTTP-%E7%8A%B6%E6%80%81%E7%A0%81%E4%B8%8E%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA"><span class="nav-number">1.9.4.</span> <span class="nav-text">ç»ƒä¹  4 å‚è€ƒç­”æ¡ˆï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%88%90%E6%9E%9C%E7%A4%BA%E4%BE%8B%E5%A1%AB%E5%86%99%EF%BC%88%E5%8F%AF%E7%85%A7%E6%8A%84%EF%BC%89"><span class="nav-number">1.10.</span> <span class="nav-text">å­¦ä¹ æˆæœç¤ºä¾‹å¡«å†™ï¼ˆå¯ç…§æŠ„ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%AA%E5%9B%BE%E4%B8%8E%E8%AF%81%E6%8D%AE%EF%BC%88%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="nav-number">1.10.1.</span> <span class="nav-text">æˆªå›¾ä¸è¯æ®ï¼ˆç¤ºä¾‹ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%91%BD%E4%BB%A4%E4%B8%8E%E8%BE%93%E5%87%BA%EF%BC%88%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="nav-number">1.10.2.</span> <span class="nav-text">å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%8D%E6%80%9D%EF%BC%88%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="nav-number">1.10.3.</span> <span class="nav-text">ç»“è®ºä¸åæ€ï¼ˆç¤ºä¾‹ï¼‰</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tigercoll"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Tigercoll</p>
  <div class="site-description" itemprop="description">ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·,å‹¿åœ¨æµ®æ²™ç­‘é«˜å°</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags">
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Tigercoll" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Tigercoll" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tigercoll.top/post/a67b221d.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Tigercoll">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tigercoll's Blog">
      <meta itemprop="description" content="ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·,å‹¿åœ¨æµ®æ²™ç­‘é«˜å°">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º | Tigercoll's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-18 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-18T00:00:00+08:00">2026-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">ç½‘ç»œå®‰å…¨</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿-Web-ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º"><a href="#Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿-Web-ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º" class="headerlink" title="Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º"></a>Day025ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - Web ä¸­é—´ä»¶æš´éœ²é¢ä¸åŠ å›º</h1><ul>
<li>æ—¥æœŸï¼š2026-01-18</li>
<li>å‘¨æ¬¡ï¼šç¬¬4å‘¨</li>
</ul>
<h2 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h2><p>ä»Šå¤©ä½ å°†æŒæ¡ï¼š</p>
<ul>
<li><strong>è¯†åˆ«å¸¸è§ä¸­é—´ä»¶çš„é»˜è®¤é…ç½®é£é™©</strong>ï¼šNginx&#x2F;Apache&#x2F;IIS çš„ç›®å½•åˆ—å‡ºã€ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ã€é»˜è®¤é…ç½®å¼±ç‚¹</li>
<li><strong>èƒ½ç»™å‡ºåŸºç¡€åŠ å›ºå»ºè®®</strong>ï¼šå…³é—­ç›®å½•åˆ—å‡ºã€éšè—ç‰ˆæœ¬å·ã€é™åˆ¶ HTTP æ–¹æ³•ã€é…ç½®å®‰å…¨å“åº”å¤´</li>
<li><strong>èƒ½ç‹¬ç«‹ä¿®æ”¹ä¸­é—´ä»¶é…ç½®</strong>ï¼šåœ¨åˆæ³•é¶åœºç¯å¢ƒæˆ–æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯åŠ å›ºæ•ˆæœ</li>
<li><strong>ç†è§£å¸¸è§ Web æ¼æ´ä¸é…ç½®çš„å…³ç³»</strong>ï¼šå¦‚æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€è·¯å¾„éå†ã€æœªæˆæƒè®¿é—®</li>
</ul>
<hr>
<span id="more"></span>

<h2 id="å­¦ä¹ å†…å®¹"><a href="#å­¦ä¹ å†…å®¹" class="headerlink" title="å­¦ä¹ å†…å®¹"></a>å­¦ä¹ å†…å®¹</h2><h3 id="1ï¸âƒ£-Web-ä¸­é—´ä»¶å¸¸è§æš´éœ²é¢"><a href="#1ï¸âƒ£-Web-ä¸­é—´ä»¶å¸¸è§æš´éœ²é¢" class="headerlink" title="1ï¸âƒ£ Web ä¸­é—´ä»¶å¸¸è§æš´éœ²é¢"></a>1ï¸âƒ£ Web ä¸­é—´ä»¶å¸¸è§æš´éœ²é¢</h3><h4 id="1-1-ç›®å½•åˆ—å‡ºï¼ˆDirectory-Listingï¼‰"><a href="#1-1-ç›®å½•åˆ—å‡ºï¼ˆDirectory-Listingï¼‰" class="headerlink" title="1.1 ç›®å½•åˆ—å‡ºï¼ˆDirectory Listingï¼‰"></a>1.1 ç›®å½•åˆ—å‡ºï¼ˆDirectory Listingï¼‰</h4><p><strong>é£é™©è¯´æ˜</strong>ï¼š</p>
<p>å½“ç›®å½•åˆ—å‡ºåŠŸèƒ½å¼€å¯æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥ç›´æ¥æµè§ˆç½‘ç«™ç›®å½•ç»“æ„ï¼Œå¯èƒ½å‘ç°ï¼š</p>
<ul>
<li>å¤‡ä»½æ–‡ä»¶ï¼ˆ<code>.bak</code>ã€<code>.sql</code>ã€<code>.zip</code>ï¼‰</li>
<li>é…ç½®æ–‡ä»¶ï¼ˆ<code>config.php</code>ã€<code>database.yml</code>ï¼‰</li>
<li>æ•æ„Ÿç›®å½•ï¼ˆ<code>admin</code>ã€<code>uploads</code>ã€<code>logs</code>ï¼‰</li>
<li>æºä»£ç æ–‡ä»¶</li>
</ul>
<p><strong>å„ä¸­é—´ä»¶é…ç½®å¯¹æ¯”</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>ä¸­é—´ä»¶</th>
<th>é»˜è®¤è¡Œä¸º</th>
<th>é…ç½®æ–‡ä»¶</th>
<th>å…³é—­å‘½ä»¤</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Nginx</strong></td>
<td>é»˜è®¤å…³é—­</td>
<td><code>nginx.conf</code> &#x2F; ç«™ç‚¹é…ç½®</td>
<td><code>autoindex off;</code></td>
</tr>
<tr>
<td><strong>Apache</strong></td>
<td>é»˜è®¤å¼€å¯</td>
<td><code>httpd.conf</code> &#x2F; <code>.htaccess</code></td>
<td><code>Options -Indexes</code></td>
</tr>
<tr>
<td><strong>IIS</strong></td>
<td>éœ€æ‰‹åŠ¨å¼€å¯</td>
<td><code>web.config</code> &#x2F; IIS ç®¡ç†å™¨</td>
<td><code>&lt;directoryBrowse enabled=&quot;false&quot; /&gt;</code></td>
</tr>
</tbody></table>
<p><strong>å®é™…å±å®³æ¡ˆä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/uploads/</span><br><span class="line">â”œâ”€â”€ backup_202501.zip        # å®Œæ•´ç½‘ç«™å¤‡ä»½</span><br><span class="line">â”œâ”€â”€ database_dump.sql         # æ•°æ®åº“å¯¼å‡ºæ–‡ä»¶</span><br><span class="line">â””â”€â”€ old_files/                # æ—§ç‰ˆæœ¬æºä»£ç </span><br></pre></td></tr></table></figure>

<hr>
<h4 id="1-2-ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ï¼ˆVersion-Disclosureï¼‰"><a href="#1-2-ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ï¼ˆVersion-Disclosureï¼‰" class="headerlink" title="1.2 ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ï¼ˆVersion Disclosureï¼‰"></a>1.2 ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²ï¼ˆVersion Disclosureï¼‰</h4><p><strong>é£é™©è¯´æ˜</strong>ï¼š</p>
<p>æš´éœ²ä¸­é—´ä»¶ç‰ˆæœ¬å·å¯ä»¥å¸®åŠ©æ”»å‡»è€…ï¼š</p>
<ul>
<li>æœç´¢å·²çŸ¥ CVE æ¼æ´</li>
<li>å®šåˆ¶ç‰¹å®šç‰ˆæœ¬çš„æ”»å‡» payload</li>
<li>è¯„ä¼°ç›®æ ‡ç³»ç»Ÿç»´æŠ¤çŠ¶å†µ</li>
</ul>
<p><strong>æ£€æµ‹æ–¹æ³•</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ curl æŸ¥çœ‹å“åº”å¤´</span></span><br><span class="line">curl -I http://example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¸å‹æš´éœ²ç¤ºä¾‹ï¼ˆä¸å®‰å…¨ï¼‰</span></span><br><span class="line">Server: nginx/1.18.0</span><br><span class="line">Server: Apache/2.4.41 (Ubuntu)</span><br><span class="line">X-Powered-By: PHP/8.1.2</span><br></pre></td></tr></table></figure>

<p><strong>å„ä¸­é—´ä»¶éšè—ç‰ˆæœ¬é…ç½®</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>ä¸­é—´ä»¶</th>
<th>é…ç½®é¡¹</th>
<th>é…ç½®ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Nginx</strong></td>
<td><code>server_tokens</code></td>
<td><code>server_tokens off;</code></td>
</tr>
<tr>
<td><strong>Apache</strong></td>
<td><code>ServerTokens</code></td>
<td><code>ServerTokens Prod</code></td>
</tr>
<tr>
<td><strong>Apache</strong></td>
<td><code>ServerSignature</code></td>
<td><code>ServerSignature Off</code></td>
</tr>
<tr>
<td><strong>IIS</strong></td>
<td>è‡ªå®šä¹‰å“åº”å¤´</td>
<td><code>Remove-WebManagedHandler</code> &#x2F; ä¿®æ”¹ URL Rewrite</td>
</tr>
</tbody></table>
<p><strong>Nginx éšè—ç‰ˆæœ¬ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nginx.conf http åŒºå—</span></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é¢å¤–ï¼šéšè— X-Powered-By å¤´</span></span><br><span class="line">    <span class="attribute">proxy_hide_header</span> X-Powered-By;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="1-3-HTTP-æ–¹æ³•é™åˆ¶ï¼ˆHTTP-Method-Restrictionsï¼‰"><a href="#1-3-HTTP-æ–¹æ³•é™åˆ¶ï¼ˆHTTP-Method-Restrictionsï¼‰" class="headerlink" title="1.3 HTTP æ–¹æ³•é™åˆ¶ï¼ˆHTTP Method Restrictionsï¼‰"></a>1.3 HTTP æ–¹æ³•é™åˆ¶ï¼ˆHTTP Method Restrictionsï¼‰</h4><p><strong>å¸¸è§ HTTP æ–¹æ³•ä¸é£é™©</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ç”¨é€”</th>
<th>å…¬å¼€è®¿é—®é£é™©</th>
</tr>
</thead>
<tbody><tr>
<td><strong>GET</strong></td>
<td>è·å–èµ„æº</td>
<td>âœ… å…è®¸</td>
</tr>
<tr>
<td><strong>POST</strong></td>
<td>æäº¤æ•°æ®</td>
<td>âœ… å…è®¸</td>
</tr>
<tr>
<td><strong>HEAD</strong></td>
<td>è·å–å“åº”å¤´</td>
<td>âš ï¸ ä¿¡æ¯æ³„éœ²</td>
</tr>
<tr>
<td><strong>OPTIONS</strong></td>
<td>æŸ¥è¯¢å¯ç”¨æ–¹æ³•</td>
<td>âš ï¸ æš´éœ²æœåŠ¡ç«¯èƒ½åŠ›</td>
</tr>
<tr>
<td><strong>PUT&#x2F;DELETE</strong></td>
<td>ä¸Šä¼ &#x2F;åˆ é™¤æ–‡ä»¶</td>
<td>ğŸš¨ æ–‡ä»¶æ“ä½œæ¼æ´</td>
</tr>
<tr>
<td><strong>TRACE</strong></td>
<td>å›æ˜¾è¯·æ±‚ï¼ˆç”¨äºè°ƒè¯•ï¼‰</td>
<td>ğŸš¨ è·¨ç«™è¿½è¸ªæ”»å‡»ï¼ˆXSTï¼‰</td>
</tr>
<tr>
<td><strong>PATCH</strong></td>
<td>éƒ¨åˆ†æ›´æ–°èµ„æº</td>
<td>âš ï¸ éœ€è¦è®¤è¯</td>
</tr>
</tbody></table>
<p><strong>é…ç½®é™åˆ¶æ–¹æ³•</strong>ï¼š</p>
<p><strong>Nginx</strong>ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="comment"># åªå…è®¸ GET POST HEAD</span></span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$request_method</span> !<span class="regexp">~ ^(GET|POST|HEAD)$</span> ) &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">405</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç¦æ­¢ TRACE</span></span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$request_method</span> = TRACE ) &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">403</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Apache</strong>ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¦æ­¢ TRACE å’Œ TRACK</span></span><br><span class="line"><span class="attribute">TraceEnable</span> <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é™åˆ¶å…è®¸çš„æ–¹æ³•</span></span><br><span class="line"><span class="section">&lt;LimitExcept GET POST HEAD&gt;</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> denied</span><br><span class="line"><span class="section">&lt;/LimitExcept&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>IIS</strong>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;TRACEVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;OPTIONSVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="1-4-å®‰å…¨å“åº”å¤´ï¼ˆSecurity-Response-Headersï¼‰"><a href="#1-4-å®‰å…¨å“åº”å¤´ï¼ˆSecurity-Response-Headersï¼‰" class="headerlink" title="1.4 å®‰å…¨å“åº”å¤´ï¼ˆSecurity Response Headersï¼‰"></a>1.4 å®‰å…¨å“åº”å¤´ï¼ˆSecurity Response Headersï¼‰</h4><p><strong>æ ¸å¿ƒå®‰å…¨å¤´éƒ¨æ¸…å•</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å¤´éƒ¨</th>
<th>ä½œç”¨</th>
<th>æ¨èå€¼</th>
</tr>
</thead>
<tbody><tr>
<td><strong>X-Frame-Options</strong></td>
<td>é˜²æ­¢ç‚¹å‡»åŠ«æŒ</td>
<td><code>DENY</code> æˆ– <code>SAMEORIGIN</code></td>
</tr>
<tr>
<td><strong>X-Content-Type-Options</strong></td>
<td>é˜²æ­¢ MIME å—…æ¢</td>
<td><code>nosniff</code></td>
</tr>
<tr>
<td><strong>X-XSS-Protection</strong></td>
<td>XSS è¿‡æ»¤å™¨ï¼ˆæ—§ç‰ˆæµè§ˆå™¨ï¼‰</td>
<td><code>1; mode=block</code></td>
</tr>
<tr>
<td><strong>Content-Security-Policy</strong></td>
<td>å†…å®¹å®‰å…¨ç­–ç•¥</td>
<td>è‡ªå®šä¹‰ç™½åå•</td>
</tr>
<tr>
<td><strong>Strict-Transport-Security</strong></td>
<td>å¼ºåˆ¶ HTTPS</td>
<td><code>max-age=31536000</code></td>
</tr>
<tr>
<td><strong>Referrer-Policy</strong></td>
<td>æ§åˆ¶ Referer ä¿¡æ¯</td>
<td><code>strict-origin-when-cross-origin</code></td>
</tr>
</tbody></table>
<p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<p><strong>Nginx</strong>ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span> always;</span><br><span class="line"><span class="attribute">add_header</span> X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span> always;</span><br><span class="line"><span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span> always;</span><br><span class="line"><span class="attribute">add_header</span> Referrer-Policy <span class="string">&quot;strict-origin-when-cross-origin&quot;</span> always;</span><br><span class="line"><span class="attribute">add_header</span> Content-Security-Policy <span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;&quot;</span> always;</span><br></pre></td></tr></table></figure>

<p><strong>Apache</strong>ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;IfModule mod_headers.c&gt;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set Referrer-Policy <span class="string">&quot;strict-origin-when-cross-origin&quot;</span></span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="1-5-æ—¥å¿—é…ç½®ï¼ˆLoggingï¼‰"><a href="#1-5-æ—¥å¿—é…ç½®ï¼ˆLoggingï¼‰" class="headerlink" title="1.5 æ—¥å¿—é…ç½®ï¼ˆLoggingï¼‰"></a>1.5 æ—¥å¿—é…ç½®ï¼ˆLoggingï¼‰</h4><p><strong>æ—¥å¿—ç±»å‹ä¸ç”¨é€”</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ—¥å¿—ç±»å‹</th>
<th>è®°å½•å†…å®¹</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td><strong>è®¿é—®æ—¥å¿—</strong></td>
<td>è¯·æ±‚æ—¶é—´ã€IPã€URLã€çŠ¶æ€ç </td>
<td>æµé‡åˆ†æã€å¼‚å¸¸æ£€æµ‹</td>
</tr>
<tr>
<td><strong>é”™è¯¯æ—¥å¿—</strong></td>
<td>é”™è¯¯è¯¦æƒ…ã€å †æ ˆè·Ÿè¸ª</td>
<td>æ•…éšœæ’æŸ¥ã€æ”»å‡»è¯†åˆ«</td>
</tr>
<tr>
<td><strong>å®‰å…¨æ—¥å¿—</strong></td>
<td>è®¤è¯å¤±è´¥ã€æ‹’ç»è®¿é—®</td>
<td>å®‰å…¨äº‹ä»¶æº¯æº</td>
</tr>
</tbody></table>
<p><strong>Nginx æ—¥å¿—é…ç½®</strong>ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># è‡ªå®šä¹‰è®¿é—®æ—¥å¿—æ ¼å¼ï¼ˆåŒ…å«æ›´å¤šå®‰å…¨ç›¸å…³ä¿¡æ¯ï¼‰</span></span><br><span class="line">    <span class="attribute">log_format</span> security <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;&quot;<span class="variable">$request</span>&quot; <span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;&quot;<span class="variable">$http_referer</span>&quot; &quot;<span class="variable">$http_user_agent</span>&quot; &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;<span class="variable">$request_time</span> <span class="variable">$upstream_response_time</span>&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/access.log security;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/<span class="literal">error</span>.log <span class="literal">warn</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2ï¸âƒ£-å„ä¸­é—´ä»¶åŸºç¡€åŠ å›ºé…ç½®"><a href="#2ï¸âƒ£-å„ä¸­é—´ä»¶åŸºç¡€åŠ å›ºé…ç½®" class="headerlink" title="2ï¸âƒ£ å„ä¸­é—´ä»¶åŸºç¡€åŠ å›ºé…ç½®"></a>2ï¸âƒ£ å„ä¸­é—´ä»¶åŸºç¡€åŠ å›ºé…ç½®</h3><h4 id="2-1-Nginx-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"><a href="#2-1-Nginx-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹" class="headerlink" title="2.1 Nginx å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"></a>2.1 Nginx å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/nginx/nginx.conf å®‰å…¨é…ç½®</span></span><br><span class="line"><span class="attribute">user</span> www-data;</span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># 1. éšè—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. å®¢æˆ·ç«¯è¯·æ±‚ä½“å¤§å°é™åˆ¶ï¼ˆé˜²æ­¢å¤§æ–‡ä»¶ä¸Šä¼ æ”»å‡»ï¼‰</span></span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">10M</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 3. è¶…æ—¶è®¾ç½®</span></span><br><span class="line">    <span class="attribute">client_body_timeout</span> <span class="number">12</span>;</span><br><span class="line">    <span class="attribute">client_header_timeout</span> <span class="number">12</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span> <span class="number">15</span>;</span><br><span class="line">    <span class="attribute">send_timeout</span> <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 4. å®‰å…¨å“åº”å¤´</span></span><br><span class="line">    <span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span> always;</span><br><span class="line">    <span class="attribute">add_header</span> X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span> always;</span><br><span class="line">    <span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span> always;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 5. æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">log_format</span> security <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;&quot;<span class="variable">$request</span>&quot; <span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;&quot;<span class="variable">$http_referer</span>&quot; &quot;<span class="variable">$http_user_agent</span>&quot;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/access.log security;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/<span class="literal">error</span>.log <span class="literal">warn</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 6. ç¦æ­¢ä¸å®‰å…¨çš„ HTTP æ–¹æ³•</span></span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$request_method</span> !<span class="regexp">~ ^(GET|POST|HEAD)$</span> ) &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">405</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 7. é™åˆ¶è¯·æ±‚é€Ÿç‡ï¼ˆé˜²æ­¢ DDoSï¼‰</span></span><br><span class="line">    <span class="attribute">limit_req_zone</span> <span class="variable">$binary_remote_addr</span> zone=one:<span class="number">10m</span> rate=10r/s;</span><br><span class="line">    </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> example.com;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å…³é—­ç›®å½•åˆ—å‡º</span></span><br><span class="line">        <span class="attribute">autoindex</span> <span class="literal">off</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é™åˆ¶è¯·æ±‚é€Ÿç‡</span></span><br><span class="line">        <span class="attribute">limit_req</span> zone=one burst=<span class="number">20</span> nodelay;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">root</span> /var/www/html;</span><br><span class="line">        <span class="attribute">index</span> index.html index.php;</span><br><span class="line">        </span><br><span class="line">        <span class="section">location</span> <span class="regexp">~ /\.</span> &#123;</span><br><span class="line">            <span class="attribute">deny</span> all;  <span class="comment"># éšè—éšè—æ–‡ä»¶</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-2-Apache-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"><a href="#2-2-Apache-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹" class="headerlink" title="2.2 Apache å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"></a>2.2 Apache å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/apache2/apache2.conf å®‰å…¨é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. éšè—ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="attribute">ServerTokens</span> Prod</span><br><span class="line"><span class="attribute">ServerSignature</span> <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç¦ç”¨ TRACE æ–¹æ³•</span></span><br><span class="line"><span class="attribute">TraceEnable</span> <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å…³é—­ç›®å½•åˆ—å‡º</span></span><br><span class="line"><span class="section">&lt;Directory /var/www/html&gt;</span></span><br><span class="line">    <span class="attribute">Options</span> -Indexes +FollowSymLinks</span><br><span class="line">    <span class="attribute">AllowOverride</span> None</span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. é™åˆ¶è¯·æ±‚å¤§å°ï¼ˆé˜²æ­¢ DoSï¼‰</span></span><br><span class="line"><span class="attribute">LimitRequestBody</span> <span class="number">10485760</span></span><br><span class="line"><span class="attribute">LimitRequestFields</span> <span class="number">100</span></span><br><span class="line"><span class="attribute">LimitRequestFieldSize</span> <span class="number">8190</span></span><br><span class="line"><span class="attribute">LimitRequestLine</span> <span class="number">8190</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. è¯·æ±‚è¶…æ—¶</span></span><br><span class="line"><span class="attribute">RequestReadTimeout</span> header=<span class="number">20</span>-<span class="number">40</span>,MinRate=<span class="number">500</span> body=<span class="number">20</span>,MinRate=<span class="number">500</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. å®‰å…¨å“åº”å¤´</span></span><br><span class="line"><span class="section">&lt;IfModule mod_headers.c&gt;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span></span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. æ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attribute">LogFormat</span> <span class="string">&quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot;</span> combined</span><br><span class="line"><span class="attribute">CustomLog</span> <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line"><span class="attribute">ErrorLog</span> <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. é˜²æ­¢ç‚¹å‡»åŠ«æŒ</span></span><br><span class="line"><span class="section">&lt;IfModule mod_rewrite.c&gt;</span></span><br><span class="line">    <span class="attribute">RewriteEngine</span> <span class="literal">On</span></span><br><span class="line">    <span class="attribute">RewriteCond</span> <span class="variable">%&#123;HTTP_REFERER&#125;</span> !^$</span><br><span class="line">    <span class="attribute">RewriteCond</span> <span class="variable">%&#123;HTTP_REFERER&#125;</span> !^https?://yourdomain\.com<span class="meta"> [NC]</span></span><br><span class="line">    <span class="attribute">RewriteRule</span> .* -<span class="meta"> [F]</span></span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-3-IIS-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"><a href="#2-3-IIS-å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹" class="headerlink" title="2.3 IIS å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹"></a>2.3 IIS å®Œæ•´å®‰å…¨é…ç½®ç¤ºä¾‹</h4><p><strong>web.config æ–‡ä»¶é…ç½®</strong>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. å…³é—­ç›®å½•æµè§ˆ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">directoryBrowse</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 2. ç¦ç”¨ä¸å®‰å…¨çš„ HTTP æ–¹æ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;TRACEVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;OPTIONSVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 3. è¯·æ±‚è¿‡æ»¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">requestFiltering</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é™åˆ¶æœ€å¤§è¯·æ±‚å†…å®¹é•¿åº¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">requestLimits</span> <span class="attr">maxAllowedContentLength</span>=<span class="string">&quot;10485760&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é™åˆ¶ URL æœ€å¤§é•¿åº¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">requestLimits</span> <span class="attr">maxUrl</span>=<span class="string">&quot;4096&quot;</span> <span class="attr">maxQueryString</span>=<span class="string">&quot;2048&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é˜»æ­¢ç‰¹å®šæ–‡ä»¶æ‰©å±•å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fileExtensions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">add</span> <span class="attr">fileExtension</span>=<span class="string">&quot;.bak&quot;</span> <span class="attr">allowed</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">add</span> <span class="attr">fileExtension</span>=<span class="string">&quot;.log&quot;</span> <span class="attr">allowed</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">add</span> <span class="attr">fileExtension</span>=<span class="string">&quot;.sql&quot;</span> <span class="attr">allowed</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">fileExtensions</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é˜»æ­¢ç‰¹å®š URL åºåˆ— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">denyUrlSequences</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">add</span> <span class="attr">sequence</span>=<span class="string">&quot;..&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">denyUrlSequences</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">requestFiltering</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!-- 4. IP é™åˆ¶ï¼ˆå¯é€‰ï¼‰ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ipSecurity</span> <span class="attr">allowUnlisted</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clear</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">ipAddress</span>=<span class="string">&quot;192.168.1.0&quot;</span> <span class="attr">subnetMask</span>=<span class="string">&quot;255.255.255.0&quot;</span> <span class="attr">allowed</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ipSecurity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 5. HTTP å“åº”å¤´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SAMEORIGIN&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Content-Type-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;nosniff&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-XSS-Protection&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1; mode=block&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 6. é”™è¯¯é¡µé¢ï¼ˆéšè—è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpErrors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">statusCode</span>=<span class="string">&quot;500&quot;</span> <span class="attr">subStatusCode</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">statusCode</span>=<span class="string">&quot;404&quot;</span> <span class="attr">subStatusCode</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">error</span> <span class="attr">statusCode</span>=<span class="string">&quot;404&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/404.html&quot;</span> <span class="attr">responseMode</span>=<span class="string">&quot;File&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">error</span> <span class="attr">statusCode</span>=<span class="string">&quot;500&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/500.html&quot;</span> <span class="attr">responseMode</span>=<span class="string">&quot;File&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">httpErrors</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 7. æ—¥å¿—é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logFile</span> <span class="attr">logExtFileFlags</span>=<span class="string">&quot;Date,Time,ClientIP,UserName,SiteName,ComputerName,ServerIP,Method,UriStem,UriQuery,HttpStatus,Win32Status,BytesSent,BytesRecv,TimeTaken,ServerPort,UserAgent,Cookie,Referer,ProtocolVersion,Host,HttpSubStatus&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3ï¸âƒ£-éªŒè¯åŠ å›ºæ•ˆæœ"><a href="#3ï¸âƒ£-éªŒè¯åŠ å›ºæ•ˆæœ" class="headerlink" title="3ï¸âƒ£ éªŒè¯åŠ å›ºæ•ˆæœ"></a>3ï¸âƒ£ éªŒè¯åŠ å›ºæ•ˆæœ</h3><h4 id="3-1-ä½¿ç”¨-curl-æ£€æŸ¥å“åº”å¤´"><a href="#3-1-ä½¿ç”¨-curl-æ£€æŸ¥å“åº”å¤´" class="headerlink" title="3.1 ä½¿ç”¨ curl æ£€æŸ¥å“åº”å¤´"></a>3.1 ä½¿ç”¨ curl æ£€æŸ¥å“åº”å¤´</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ Server å¤´ï¼ˆåº”éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼‰</span></span><br><span class="line">curl -I http://localhost:8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸç»“æœï¼ˆå®‰å…¨ï¼‰</span></span><br><span class="line">Server: nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸å®‰å…¨ç»“æœ</span></span><br><span class="line">Server: nginx/1.18.0 (Ubuntu)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å®‰å…¨å“åº”å¤´</span></span><br><span class="line">curl -I http://localhost:8080 2&gt;&amp;1 | grep -i <span class="string">&quot;x-&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸç»“æœ</span></span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">X-XSS-Protection: 1; mode=block</span><br></pre></td></tr></table></figure>

<h4 id="3-2-æµ‹è¯•ç›®å½•åˆ—å‡º"><a href="#3-2-æµ‹è¯•ç›®å½•åˆ—å‡º" class="headerlink" title="3.2 æµ‹è¯•ç›®å½•åˆ—å‡º"></a>3.2 æµ‹è¯•ç›®å½•åˆ—å‡º</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¿é—®æ—  index æ–‡ä»¶çš„ç›®å½•</span></span><br><span class="line">curl http://localhost:8080/uploads/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¿”å›ç›®å½•åˆ—è¡¨ï¼ˆä¸å®‰å…¨ï¼‰</span></span><br><span class="line">Index of /uploads/</span><br><span class="line">...</span><br><span class="line">backup.zip</span><br><span class="line">config.php</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸç»“æœï¼ˆå®‰å…¨ï¼‰</span></span><br><span class="line">403 Forbidden</span><br><span class="line">æˆ–</span><br><span class="line">404 Not Found</span><br></pre></td></tr></table></figure>

<h4 id="3-3-æµ‹è¯•-HTTP-æ–¹æ³•é™åˆ¶"><a href="#3-3-æµ‹è¯•-HTTP-æ–¹æ³•é™åˆ¶" class="headerlink" title="3.3 æµ‹è¯• HTTP æ–¹æ³•é™åˆ¶"></a>3.3 æµ‹è¯• HTTP æ–¹æ³•é™åˆ¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯• PUT æ–¹æ³•ï¼ˆåº”è¢«æ‹’ç»ï¼‰</span></span><br><span class="line">curl -X PUT http://localhost:8080/test.txt -d <span class="string">&quot;hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸç»“æœ</span></span><br><span class="line">405 Method Not Allowed</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• TRACE æ–¹æ³•ï¼ˆåº”è¢«æ‹’ç»ï¼‰</span></span><br><span class="line">curl -X TRACE http://localhost:8080/ -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸç»“æœ</span></span><br><span class="line">403 Forbidden</span><br></pre></td></tr></table></figure>

<h4 id="3-4-ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·"><a href="#3-4-ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·" class="headerlink" title="3.4 ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·"></a>3.4 ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·</h4><ol>
<li>æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰</li>
<li>åˆ‡æ¢åˆ° Network æ ‡ç­¾</li>
<li>åˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»ä»»æ„è¯·æ±‚</li>
<li>æŸ¥çœ‹ Response Headers æ ‡ç­¾</li>
<li>ç¡®è®¤å®‰å…¨å¤´éƒ¨å·²æ­£ç¡®æ·»åŠ </li>
</ol>
<hr>
<h2 id="å®è·µä»»åŠ¡ï¼ˆåˆæ³•æˆæƒèŒƒå›´å†…ï¼‰"><a href="#å®è·µä»»åŠ¡ï¼ˆåˆæ³•æˆæƒèŒƒå›´å†…ï¼‰" class="headerlink" title="å®è·µä»»åŠ¡ï¼ˆåˆæ³•æˆæƒèŒƒå›´å†…ï¼‰"></a>å®è·µä»»åŠ¡ï¼ˆåˆæ³•æˆæƒèŒƒå›´å†…ï¼‰</h2><blockquote>
<p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸‹ä»»åŠ¡è¯·åœ¨ä½ è‡ªå·±çš„æµ‹è¯•ç¯å¢ƒã€è™šæ‹Ÿæœºæˆ–æˆæƒé¶åœºä¸­æ‰§è¡Œã€‚ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éšæ„ä¿®æ”¹é…ç½®ã€‚</p>
</blockquote>
<hr>
<h3 id="ä»»åŠ¡-1ï¼ˆå¿…åšï¼‰ï¼šæ£€æŸ¥å½“å‰é…ç½®çš„æš´éœ²é¢"><a href="#ä»»åŠ¡-1ï¼ˆå¿…åšï¼‰ï¼šæ£€æŸ¥å½“å‰é…ç½®çš„æš´éœ²é¢" class="headerlink" title="ä»»åŠ¡ 1ï¼ˆå¿…åšï¼‰ï¼šæ£€æŸ¥å½“å‰é…ç½®çš„æš´éœ²é¢"></a>ä»»åŠ¡ 1ï¼ˆå¿…åšï¼‰ï¼šæ£€æŸ¥å½“å‰é…ç½®çš„æš´éœ²é¢</h3><p><strong>ç›®æ ‡</strong>ï¼šæ‰«æä½ çš„æµ‹è¯• Web æœåŠ¡å™¨ï¼Œè¯†åˆ«é»˜è®¤é…ç½®é£é™©ã€‚</p>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>æ‰«æç›®å½•åˆ—å‡ºé£é™©</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux/Mac</span></span><br><span class="line">curl http://localhost/uploads/</span><br><span class="line">curl http://localhost/backup/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows PowerShell</span></span><br><span class="line">curl http://localhost/uploads/</span><br><span class="line">curl http://localhost/backup/</span><br></pre></td></tr></table></figure>

<p>è®°å½•ç»“æœï¼šæ˜¯å¦å­˜åœ¨ç›®å½•åˆ—å‡ºï¼Ÿå¦‚æœå­˜åœ¨ï¼Œæœ‰å“ªäº›æ•æ„Ÿæ–‡ä»¶å¯è§ï¼Ÿ</p>
<ol start="2">
<li><strong>æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -I http://localhost/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å“åº”å¤´ä¸­çš„ Server å’Œ X-Powered-By</span></span><br></pre></td></tr></table></figure>

<p>è®°å½•ç»“æœï¼š</p>
<ul>
<li>Server å¤´æ˜¾ç¤ºä»€ä¹ˆä¿¡æ¯ï¼Ÿ</li>
<li>X-Powered-By å¤´æ˜¯å¦å­˜åœ¨ï¼Ÿ</li>
</ul>
<ol start="3">
<li><strong>æµ‹è¯• HTTP æ–¹æ³•</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯• TRACE æ–¹æ³•</span></span><br><span class="line">curl -X TRACE http://localhost/ -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• OPTIONS æ–¹æ³•</span></span><br><span class="line">curl -X OPTIONS http://localhost/ -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• PUT æ–¹æ³•</span></span><br><span class="line">curl -X PUT http://localhost/test.txt -d <span class="string">&quot;hello world&quot;</span> -v</span><br></pre></td></tr></table></figure>

<p>è®°å½•ç»“æœï¼š</p>
<ul>
<li>å“ªäº›æ–¹æ³•è¢«å…è®¸ï¼Ÿ</li>
<li>å“ªäº›æ–¹æ³•åº”è¯¥è¢«ç¦æ­¢ï¼Ÿ</li>
</ul>
<hr>
<h3 id="ä»»åŠ¡-2ï¼ˆå¿…åšï¼‰ï¼šé…ç½®-Nginx-å®‰å…¨åŠ å›º"><a href="#ä»»åŠ¡-2ï¼ˆå¿…åšï¼‰ï¼šé…ç½®-Nginx-å®‰å…¨åŠ å›º" class="headerlink" title="ä»»åŠ¡ 2ï¼ˆå¿…åšï¼‰ï¼šé…ç½® Nginx å®‰å…¨åŠ å›º"></a>ä»»åŠ¡ 2ï¼ˆå¿…åšï¼‰ï¼šé…ç½® Nginx å®‰å…¨åŠ å›º</h3><p><strong>å‰ç½®æ¡ä»¶</strong>ï¼šæœ¬åœ°æˆ–è™šæ‹Ÿæœºä¸Šå·²å®‰è£… Nginx</p>
<p><strong>æ­¥éª¤ 1ï¼šå¤‡ä»½åŸå§‹é…ç½®</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 2ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p>
<p>ç¼–è¾‘ <code>/etc/nginx/nginx.conf</code>ï¼Œæ·»åŠ ä»¥ä¸‹å®‰å…¨é…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># 1. éšè—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. å…³é—­ç›®å½•åˆ—å‡ºï¼ˆåœ¨ server å—ä¸­ï¼‰</span></span><br><span class="line">    <span class="comment"># autoindex off;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 3. ç¦æ­¢ä¸å®‰å…¨çš„ HTTP æ–¹æ³•</span></span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$request_method</span> !<span class="regexp">~ ^(GET|POST|HEAD)$</span> ) &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">405</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 4. æ·»åŠ å®‰å…¨å“åº”å¤´</span></span><br><span class="line">    <span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span> always;</span><br><span class="line">    <span class="attribute">add_header</span> X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span> always;</span><br><span class="line">    <span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span> always;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ... å…¶ä»–é…ç½®ä¿æŒä¸å˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 3ï¼šé‡å¯ Nginx</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•</span></span><br><span class="line">sudo nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">sudo systemctl restart nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ– Windows</span></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 4ï¼šéªŒè¯åŠ å›ºæ•ˆæœ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å†æ¬¡æ£€æŸ¥ Server å¤´</span></span><br><span class="line">curl -I http://localhost/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æµ‹è¯•ç¦ç”¨çš„ HTTP æ–¹æ³•</span></span><br><span class="line">curl -X TRACE http://localhost/</span><br><span class="line">curl -X PUT http://localhost/test.txt -d <span class="string">&quot;test&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹å®‰å…¨å“åº”å¤´</span></span><br></pre></td></tr></table></figure>

<p><strong>å¯¹æ¯”è¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ£€æŸ¥é¡¹</th>
<th>åŠ å›ºå‰</th>
<th>åŠ å›ºå</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>Server å¤´</td>
<td><code>nginx/1.18.0</code></td>
<td><code>nginx</code></td>
<td>âœ… éšè—ç‰ˆæœ¬å·</td>
</tr>
<tr>
<td>ç›®å½•åˆ—å‡º</td>
<td>æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨</td>
<td>403 Forbidden</td>
<td>âœ… å·²ç¦ç”¨</td>
</tr>
<tr>
<td>TRACE æ–¹æ³•</td>
<td>å…è®¸</td>
<td>405 Method Not Allowed</td>
<td>âœ… å·²ç¦æ­¢</td>
</tr>
<tr>
<td>PUT æ–¹æ³•</td>
<td>å…è®¸</td>
<td>405 Method Not Allowed</td>
<td>âœ… å·²ç¦æ­¢</td>
</tr>
<tr>
<td>X-Frame-Options</td>
<td>æ— </td>
<td>SAMEORIGIN</td>
<td>âœ… å·²æ·»åŠ </td>
</tr>
</tbody></table>
<hr>
<h3 id="ä»»åŠ¡-3ï¼ˆè¿›é˜¶ï¼‰ï¼šé…ç½®-Apache-å®‰å…¨åŠ å›º"><a href="#ä»»åŠ¡-3ï¼ˆè¿›é˜¶ï¼‰ï¼šé…ç½®-Apache-å®‰å…¨åŠ å›º" class="headerlink" title="ä»»åŠ¡ 3ï¼ˆè¿›é˜¶ï¼‰ï¼šé…ç½® Apache å®‰å…¨åŠ å›º"></a>ä»»åŠ¡ 3ï¼ˆè¿›é˜¶ï¼‰ï¼šé…ç½® Apache å®‰å…¨åŠ å›º</h3><p><strong>å‰ç½®æ¡ä»¶</strong>ï¼šæœ¬åœ°æˆ–è™šæ‹Ÿæœºä¸Šå·²å®‰è£… Apache</p>
<p><strong>æ­¥éª¤ 1ï¼šå¤‡ä»½é…ç½®</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /etc/apache2/apache2.conf /etc/apache2/apache2.conf.backup</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 2ï¼šä¿®æ”¹é…ç½®</strong></p>
<p>ç¼–è¾‘ <code>/etc/apache2/apache2.conf</code> æˆ–ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. éšè—ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="attribute">ServerTokens</span> Prod</span><br><span class="line"><span class="attribute">ServerSignature</span> <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç¦ç”¨ TRACE æ–¹æ³•</span></span><br><span class="line"><span class="attribute">TraceEnable</span> <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å…³é—­ç›®å½•åˆ—å‡º</span></span><br><span class="line"><span class="section">&lt;Directory /var/www/html&gt;</span></span><br><span class="line">    <span class="attribute">Options</span> -Indexes +FollowSymLinks</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. é™åˆ¶å…è®¸çš„ HTTP æ–¹æ³•</span></span><br><span class="line"><span class="section">&lt;LimitExcept GET POST HEAD&gt;</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> denied</span><br><span class="line"><span class="section">&lt;/LimitExcept&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æ·»åŠ å®‰å…¨å“åº”å¤´</span></span><br><span class="line"><span class="section">&lt;IfModule mod_headers.c&gt;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span></span><br><span class="line">    <span class="attribute">Header</span> always set X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span></span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 3ï¼šå¯ç”¨å¿…è¦æ¨¡å—å¹¶é‡å¯</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯ç”¨ headers æ¨¡å—</span></span><br><span class="line">sudo a2enmod headers</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•é…ç½®</span></span><br><span class="line">sudo apache2ctl configtest</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 4ï¼šéªŒè¯åŠ å›ºæ•ˆæœ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ Server å¤´</span></span><br><span class="line">curl -I http://localhost/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ç¦ç”¨çš„æ–¹æ³•</span></span><br><span class="line">curl -X TRACE http://localhost/</span><br><span class="line">curl -X OPTIONS http://localhost/</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ä»»åŠ¡-4ï¼ˆè¿›é˜¶ï¼‰ï¼šIIS-å®‰å…¨åŠ å›º"><a href="#ä»»åŠ¡-4ï¼ˆè¿›é˜¶ï¼‰ï¼šIIS-å®‰å…¨åŠ å›º" class="headerlink" title="ä»»åŠ¡ 4ï¼ˆè¿›é˜¶ï¼‰ï¼šIIS å®‰å…¨åŠ å›º"></a>ä»»åŠ¡ 4ï¼ˆè¿›é˜¶ï¼‰ï¼šIIS å®‰å…¨åŠ å›º</h3><p><strong>å‰ç½®æ¡ä»¶</strong>ï¼šWindows Server æˆ– Windows 10&#x2F;11 ä¸Šå·²å®‰è£… IIS</p>
<p><strong>æ­¥éª¤ 1ï¼šæ‰“å¼€ IIS ç®¡ç†å™¨</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inetmgr</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 2ï¼šé…ç½® web.config</strong></p>
<p>åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•åˆ›å»ºæˆ–ç¼–è¾‘ <code>web.config</code>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…³é—­ç›®å½•æµè§ˆ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">directoryBrowse</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ç¦ç”¨ä¸å®‰å…¨çš„ HTTP æ–¹æ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;TRACEVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remove</span> <span class="attr">name</span>=<span class="string">&quot;OPTIONSVerbHandler&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- å®‰å…¨å“åº”å¤´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SAMEORIGIN&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Content-Type-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;nosniff&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-XSS-Protection&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1; mode=block&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 3ï¼šéªŒè¯åŠ å›ºæ•ˆæœ</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥å“åº”å¤´</span></span><br><span class="line"><span class="built_in">curl</span> <span class="literal">-I</span> http://localhost/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ç¦ç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="built_in">curl</span> <span class="literal">-X</span> TRACE http://localhost/ <span class="literal">-v</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ä»»åŠ¡-5ï¼ˆå®æˆ˜ï¼‰ï¼šè‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥è„šæœ¬"><a href="#ä»»åŠ¡-5ï¼ˆå®æˆ˜ï¼‰ï¼šè‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥è„šæœ¬" class="headerlink" title="ä»»åŠ¡ 5ï¼ˆå®æˆ˜ï¼‰ï¼šè‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥è„šæœ¬"></a>ä»»åŠ¡ 5ï¼ˆå®æˆ˜ï¼‰ï¼šè‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥è„šæœ¬</h3><p><strong>ç›®æ ‡</strong>ï¼šç¼–å†™ Python è„šæœ¬è‡ªåŠ¨æ£€æŸ¥ Web æœåŠ¡å™¨å®‰å…¨é…ç½®ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Web æœåŠ¡å™¨å®‰å…¨åŸºçº¿æ£€æŸ¥è„šæœ¬</span></span><br><span class="line"><span class="string">æ£€æŸ¥é¡¹ç›®ï¼šç‰ˆæœ¬ä¿¡æ¯ã€å®‰å…¨å“åº”å¤´ã€HTTP æ–¹æ³•ã€ç›®å½•åˆ—å‡º</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WebSecurityChecker</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, base_url</span>):</span><br><span class="line">        self.base_url = base_url.rstrip(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        self.issues = []</span><br><span class="line">        self.passed = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_version_disclosure</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = requests.head(self.base_url, timeout=<span class="number">5</span>)</span><br><span class="line">            server = resp.headers.get(<span class="string">&#x27;Server&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            x_powered = resp.headers.get(<span class="string">&#x27;X-Powered-By&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ£€æŸ¥ Server å¤´æ˜¯å¦åŒ…å«ç‰ˆæœ¬å·</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">any</span>(char.isdigit() <span class="keyword">for</span> char <span class="keyword">in</span> server):</span><br><span class="line">                self.issues.append(<span class="string">f&quot;ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²: Server å¤´æš´éœ²ç‰ˆæœ¬ - &#x27;<span class="subst">&#123;server&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.passed.append(<span class="string">f&quot;ç‰ˆæœ¬ä¿¡æ¯: Server å¤´å·²éšè—ç‰ˆæœ¬å· - &#x27;<span class="subst">&#123;server&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> x_powered:</span><br><span class="line">                self.issues.append(<span class="string">f&quot;æŠ€æœ¯æ ˆæ³„éœ²: X-Powered-By å¤´ - &#x27;<span class="subst">&#123;x_powered&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.passed.append(<span class="string">&quot;æŠ€æœ¯æ ˆ: æœªæš´éœ² X-Powered-By å¤´&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            self.issues.append(<span class="string">f&quot;ç‰ˆæœ¬æ£€æŸ¥å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_security_headers</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥å®‰å…¨å“åº”å¤´&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = requests.head(self.base_url, timeout=<span class="number">5</span>)</span><br><span class="line">            </span><br><span class="line">            headers = &#123;</span><br><span class="line">                <span class="string">&#x27;X-Frame-Options&#x27;</span>: <span class="string">&#x27;ç‚¹å‡»åŠ«æŒé˜²æŠ¤&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;X-Content-Type-Options&#x27;</span>: <span class="string">&#x27;MIME å—…æ¢é˜²æŠ¤&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;X-XSS-Protection&#x27;</span>: <span class="string">&#x27;XSS è¿‡æ»¤å™¨&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Content-Security-Policy&#x27;</span>: <span class="string">&#x27;å†…å®¹å®‰å…¨ç­–ç•¥&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> header, desc <span class="keyword">in</span> headers.items():</span><br><span class="line">                <span class="keyword">if</span> header <span class="keyword">in</span> resp.headers:</span><br><span class="line">                    self.passed.append(<span class="string">f&quot;å®‰å…¨å¤´: <span class="subst">&#123;header&#125;</span> (<span class="subst">&#123;desc&#125;</span>) - å·²é…ç½®&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.issues.append(<span class="string">f&quot;å®‰å…¨å¤´ç¼ºå¤±: <span class="subst">&#123;header&#125;</span> (<span class="subst">&#123;desc&#125;</span>)&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            self.issues.append(<span class="string">f&quot;å®‰å…¨å¤´æ£€æŸ¥å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_http_methods</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥ä¸å®‰å…¨çš„ HTTP æ–¹æ³•&quot;&quot;&quot;</span></span><br><span class="line">        dangerous_methods = [<span class="string">&#x27;TRACE&#x27;</span>, <span class="string">&#x27;OPTIONS&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;DELETE&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> method <span class="keyword">in</span> dangerous_methods:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                resp = requests.request(method, self.base_url, timeout=<span class="number">5</span>)</span><br><span class="line">                <span class="keyword">if</span> resp.status_code <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">405</span>, <span class="number">501</span>]:</span><br><span class="line">                    self.issues.append(<span class="string">f&quot;å±é™©æ–¹æ³•: <span class="subst">&#123;method&#125;</span> è¢«å…è®¸ (çŠ¶æ€ç : <span class="subst">&#123;resp.status_code&#125;</span>)&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.passed.append(<span class="string">f&quot;å±é™©æ–¹æ³•: <span class="subst">&#123;method&#125;</span> å·²ç¦ç”¨&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_directory_listing</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥ç›®å½•åˆ—å‡º&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># å°è¯•è®¿é—®å¸¸è§ç›®å½•</span></span><br><span class="line">            test_paths = [<span class="string">&#x27;/uploads/&#x27;</span>, <span class="string">&#x27;/images/&#x27;</span>, <span class="string">&#x27;/backup/&#x27;</span>, <span class="string">&#x27;/tmp/&#x27;</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> path <span class="keyword">in</span> test_paths:</span><br><span class="line">                url = urljoin(self.base_url, path)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    resp = requests.get(url, timeout=<span class="number">5</span>)</span><br><span class="line">                    <span class="comment"># ç®€å•åˆ¤æ–­ï¼šæ£€æŸ¥å“åº”æ˜¯å¦åŒ…å«ç›®å½•åˆ—è¡¨ç‰¹å¾</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="string">&#x27;Index of&#x27;</span> <span class="keyword">in</span> resp.text <span class="keyword">or</span> <span class="string">&#x27;Parent Directory&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">                        self.issues.append(<span class="string">f&quot;ç›®å½•åˆ—å‡º: <span class="subst">&#123;path&#125;</span> å¯åˆ—å‡º&quot;</span>)</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            self.issues.append(<span class="string">f&quot;ç›®å½•åˆ—å‡ºæ£€æŸ¥å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_report</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Web æœåŠ¡å™¨å®‰å…¨åŸºçº¿æ£€æŸ¥æŠ¥å‘Š&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ç›®æ ‡: <span class="subst">&#123;self.base_url&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\nâœ… é€šè¿‡é¡¹ (<span class="subst">&#123;<span class="built_in">len</span>(self.passed)&#125;</span>)&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.passed:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;  + <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\nâš ï¸  é—®é¢˜é¡¹ (<span class="subst">&#123;<span class="built_in">len</span>(self.issues)&#125;</span>)&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.issues:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;  - <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å®‰å…¨è¯„åˆ†: <span class="subst">&#123;<span class="built_in">len</span>(self.passed) / (<span class="built_in">len</span>(self.passed) + <span class="built_in">len</span>(self.issues)) * <span class="number">100</span>:<span class="number">.1</span>f&#125;</span>%&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç”¨æ³•: python check_web_security.py &lt;URL&gt;&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç¤ºä¾‹: python check_web_security.py http://localhost:8080&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    url = sys.argv[<span class="number">1</span>]</span><br><span class="line">    checker = WebSecurityChecker(url)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨æ£€æŸ¥ Web æœåŠ¡å™¨å®‰å…¨é…ç½®...\n&quot;</span>)</span><br><span class="line">    checker.check_version_disclosure()</span><br><span class="line">    checker.check_security_headers()</span><br><span class="line">    checker.check_http_methods()</span><br><span class="line">    checker.check_directory_listing()</span><br><span class="line">    </span><br><span class="line">    checker.generate_report()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p><strong>è¿è¡Œè„šæœ¬</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">pip install requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œæ£€æŸ¥</span></span><br><span class="line">python check_web_security.py http://localhost:8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æœŸè¾“å‡ºç¤ºä¾‹</span></span><br><span class="line">============================================================</span><br><span class="line">Web æœåŠ¡å™¨å®‰å…¨åŸºçº¿æ£€æŸ¥æŠ¥å‘Š</span><br><span class="line">ç›®æ ‡: http://localhost:8080</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">âœ… é€šè¿‡é¡¹ (4)</span><br><span class="line">  + ç‰ˆæœ¬ä¿¡æ¯: Server å¤´å·²éšè—ç‰ˆæœ¬å· - <span class="string">&#x27;nginx&#x27;</span></span><br><span class="line">  + å®‰å…¨å¤´: X-Frame-Options (ç‚¹å‡»åŠ«æŒé˜²æŠ¤) - å·²é…ç½®</span><br><span class="line">  + å®‰å…¨å¤´: X-Content-Type-Options (MIME å—…æ¢é˜²æŠ¤) - å·²é…ç½®</span><br><span class="line">  + å±é™©æ–¹æ³•: TRACE å·²ç¦ç”¨</span><br><span class="line"></span><br><span class="line">âš ï¸  é—®é¢˜é¡¹ (3)</span><br><span class="line">  - å®‰å…¨å¤´ç¼ºå¤±: X-XSS-Protection (XSS è¿‡æ»¤å™¨)</span><br><span class="line">  - å®‰å…¨å¤´ç¼ºå¤±: Content-Security-Policy (å†…å®¹å®‰å…¨ç­–ç•¥)</span><br><span class="line">  - ç›®å½•åˆ—å‡º: /uploads/ å¯åˆ—å‡º</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">å®‰å…¨è¯„åˆ†: 57.1%</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰"><a href="#å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰" class="headerlink" title="å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰"></a>å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰</h2><hr>
<h3 id="ç»ƒä¹ -1ï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ"><a href="#ç»ƒä¹ -1ï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ" class="headerlink" title="ç»ƒä¹  1ï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ"></a>ç»ƒä¹  1ï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</h3><p><strong>æ€è·¯æç¤º</strong>ï¼š</p>
<ul>
<li>æ”»å‡»è€…å¦‚ä½•åˆ©ç”¨ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</li>
<li>éšè—ç‰ˆæœ¬ä¿¡æ¯èƒ½å®Œå…¨é˜²æ­¢æ”»å‡»å—ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯â€æ·±åº¦é˜²å¾¡â€ï¼ˆDefense in Depthï¼‰ï¼Ÿ</li>
</ul>
<hr>
<h3 id="ç»ƒä¹ -2ï¼šX-Frame-Options-å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ç»ƒä¹ -2ï¼šX-Frame-Options-å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ç»ƒä¹  2ï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ç»ƒä¹  2ï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>æç¤ºå€¼</strong>ï¼š</p>
<ul>
<li><code>DENY</code></li>
<li><code>SAMEORIGIN</code></li>
<li><code>ALLOW-FROM uri</code></li>
</ul>
<p><strong>æ€è·¯æç¤º</strong>ï¼š</p>
<ul>
<li>ç‚¹å‡»åŠ«æŒï¼ˆClickjackingï¼‰æ”»å‡»çš„åŸç†</li>
<li>æ¯ç§å€¼çš„å…è®¸&#x2F;æ‹’ç»è§„åˆ™</li>
<li>CSP çš„ <code>frame-ancestors</code> å¦‚ä½•æ›¿ä»£ <code>ALLOW-FROM</code></li>
</ul>
<hr>
<h3 id="ç»ƒä¹ -3ï¼šé…ç½®-Content-Security-Policyï¼ˆCSPï¼‰"><a href="#ç»ƒä¹ -3ï¼šé…ç½®-Content-Security-Policyï¼ˆCSPï¼‰" class="headerlink" title="ç»ƒä¹  3ï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰"></a>ç»ƒä¹  3ï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰</h3><p><strong>ä»»åŠ¡</strong>ï¼šä¸ºä¸€ä¸ªå…è®¸åŠ è½½ Google Fonts çš„ç½‘ç«™ç¼–å†™ CSP å¤´éƒ¨ã€‚</p>
<p><strong>è¦æ±‚</strong>ï¼š</p>
<ul>
<li>é»˜è®¤åªå…è®¸åŒæºèµ„æº</li>
<li>å…è®¸åŠ è½½ fonts.googleapis.com å’Œ fonts.gstatic.com</li>
<li>ç¦æ­¢å†…è”è„šæœ¬ï¼ˆ<code>unsafe-inline</code>ï¼‰</li>
<li>å…è®¸å†…è”æ ·å¼ï¼ˆ<code>unsafe-inline</code>ï¼‰</li>
</ul>
<p><strong>æ€è·¯æç¤º</strong>ï¼š</p>
<ul>
<li>CSP æŒ‡ä»¤æ ¼å¼ï¼š<code>default-src</code>, <code>script-src</code>, <code>style-src</code>, <code>font-src</code></li>
<li>å¤šä¸ªåŸŸåç”¨ç©ºæ ¼åˆ†éš”</li>
<li>ä½¿ç”¨ Report-Only æ¨¡å¼å…ˆæµ‹è¯•</li>
</ul>
<hr>
<h3 id="ç»ƒä¹ -4ï¼šHTTP-çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º"><a href="#ç»ƒä¹ -4ï¼šHTTP-çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º" class="headerlink" title="ç»ƒä¹  4ï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º"></a>ç»ƒä¹  4ï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º</h3><p><strong>é—®é¢˜</strong>ï¼šä»¥ä¸‹çŠ¶æ€ç åœ¨åŠ å›ºååº”è¯¥è¿”å›ä»€ä¹ˆï¼Ÿ</p>
<table>
<thead>
<tr>
<th>HTTP æ–¹æ³•</th>
<th>é¢„æœŸçŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>200 OK</td>
<td>âœ… å…è®¸</td>
</tr>
<tr>
<td>POST</td>
<td>200 OK</td>
<td>âœ… å…è®¸</td>
</tr>
<tr>
<td>TRACE</td>
<td>?</td>
<td>âŒ åº”ç¦æ­¢</td>
</tr>
<tr>
<td>PUT</td>
<td>?</td>
<td>âŒ åº”ç¦æ­¢</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>?</td>
<td>âš ï¸ é™åˆ¶</td>
</tr>
</tbody></table>
<p><strong>æ€è·¯æç¤º</strong>ï¼š</p>
<ul>
<li>405 Method Not Allowedï¼šæ–¹æ³•ä¸è¢«å…è®¸</li>
<li>403 Forbiddenï¼šç¦æ­¢è®¿é—®</li>
<li>501 Not Implementedï¼šæœªå®ç°ï¼ˆæœåŠ¡ç«¯ä¸æ”¯æŒè¯¥æ–¹æ³•ï¼‰</li>
</ul>
<hr>
<h2 id="è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰"><a href="#è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰" class="headerlink" title="è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰"></a>è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰</h2><ul>
<li>âœ… èƒ½è¯†åˆ« Web ä¸­é—´ä»¶çš„ä¸‰ç§ä¸»è¦æš´éœ²é¢ï¼ˆç›®å½•åˆ—å‡ºã€ç‰ˆæœ¬ä¿¡æ¯ã€ä¸å®‰å…¨æ–¹æ³•ï¼‰</li>
<li>âœ… èƒ½ç‹¬ç«‹ä¿®æ”¹ Nginx&#x2F;Apache é…ç½®å¹¶é‡å¯æœåŠ¡</li>
<li>âœ… èƒ½ä½¿ç”¨ curl éªŒè¯åŠ å›ºæ•ˆæœ</li>
<li>âœ… èƒ½è§£é‡Š 5 ç§ä»¥ä¸Šå®‰å…¨å“åº”å¤´çš„ä½œç”¨</li>
<li>âœ… èƒ½ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬æ£€æŸ¥ Web æœåŠ¡å™¨åŸºçº¿</li>
</ul>
<hr>
<h2 id="å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰-1"><a href="#å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰-1" class="headerlink" title="å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰"></a>å·©å›ºç»ƒä¹ ï¼ˆé¢˜ä¸å¤ç›˜ï¼‰</h2><ul>
<li>é¢˜ç›®ï¼šä¸ºä½•å»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</li>
<li>ç»ƒä¹ ï¼šç»™å‡ºä¸€ä¸ªå®‰å…¨çš„åŸºç¡€é…ç½®ç¤ºä¾‹</li>
</ul>
<h2 id="è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰-1"><a href="#è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰-1" class="headerlink" title="è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰"></a>è¯„ä¼°æ ‡å‡†ï¼ˆè¾¾æˆåˆ¤å®šï¼‰</h2><ul>
<li>é…ç½®æ–‡ä»¶ä¸éªŒè¯æˆªå›¾é½å¤‡</li>
<li>âœ… èƒ½è¯´æ˜åŠ å›ºé¡¹çš„å½±å“</li>
</ul>
<h2 id="å­¦ä¹ æˆæœè¾¾æˆæƒ…å†µï¼ˆç”±å­¦ä¹ è€…å¡«å†™ï¼‰"><a href="#å­¦ä¹ æˆæœè¾¾æˆæƒ…å†µï¼ˆç”±å­¦ä¹ è€…å¡«å†™ï¼‰" class="headerlink" title="å­¦ä¹ æˆæœè¾¾æˆæƒ…å†µï¼ˆç”±å­¦ä¹ è€…å¡«å†™ï¼‰"></a>å­¦ä¹ æˆæœè¾¾æˆæƒ…å†µï¼ˆç”±å­¦ä¹ è€…å¡«å†™ï¼‰</h2><hr>
<h3 id="æˆªå›¾ä¸è¯æ®"><a href="#æˆªå›¾ä¸è¯æ®" class="headerlink" title="æˆªå›¾ä¸è¯æ®"></a>æˆªå›¾ä¸è¯æ®</h3><ul>
<li><input disabled="" type="checkbox"> åŠ å›ºå‰çš„ curl å“åº”å¤´æˆªå›¾ï¼ˆServer å¤´æš´éœ²ç‰ˆæœ¬ä¿¡æ¯ï¼‰</li>
<li><input disabled="" type="checkbox"> åŠ å›ºåçš„ curl å“åº”å¤´æˆªå›¾ï¼ˆServer å¤´å·²éšè—ï¼‰</li>
<li><input disabled="" type="checkbox"> ç›®å½•åˆ—å‡ºæµ‹è¯•æˆªå›¾ï¼ˆåŠ å›ºå‰&#x2F;åå¯¹æ¯”ï¼‰</li>
<li><input disabled="" type="checkbox"> HTTP æ–¹æ³•æµ‹è¯•æˆªå›¾ï¼ˆTRACE&#x2F;PUT è¿”å› 405ï¼‰</li>
<li><input disabled="" type="checkbox"> æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹å®‰å…¨å“åº”å¤´æˆªå›¾</li>
<li><input disabled="" type="checkbox"> è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬è¿è¡Œè¾“å‡ºæˆªå›¾</li>
</ul>
<hr>
<h3 id="å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç²˜è´´å…³é”®ç‰‡æ®µï¼‰"><a href="#å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç²˜è´´å…³é”®ç‰‡æ®µï¼‰" class="headerlink" title="å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç²˜è´´å…³é”®ç‰‡æ®µï¼‰"></a>å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç²˜è´´å…³é”®ç‰‡æ®µï¼‰</h3><p><strong>åŠ å›ºå‰ Server å¤´</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ curl -I http://localhost/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.18.0 (Ubuntu)</span><br><span class="line">Date: Fri, 17 Jan 2026 10:30:00 GMT</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></table></figure>

<p><strong>åŠ å›ºå Server å¤´</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ curl -I http://localhost/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Fri, 17 Jan 2026 10:35:00 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">X-XSS-Protection: 1; mode=block</span><br></pre></td></tr></table></figure>

<p><strong>ç›®å½•åˆ—å‡ºæµ‹è¯•</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ å›ºå‰</span></span><br><span class="line">$ curl http://localhost/uploads/</span><br><span class="line">Index of /uploads/</span><br><span class="line">..</span><br><span class="line">backup.zip</span><br><span class="line">config.php</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å›ºå</span></span><br><span class="line">$ curl http://localhost/uploads/</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>HTTP æ–¹æ³•æµ‹è¯•</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X TRACE http://localhost/ -v</span><br><span class="line">...</span><br><span class="line">&lt; HTTP/1.1 405 Method Not Allowed</span><br><span class="line">&lt; Server: nginx</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ curl -X PUT http://localhost/test.txt -d <span class="string">&quot;hello&quot;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;405 Not Allowed&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç»“è®ºä¸åæ€"><a href="#ç»“è®ºä¸åæ€" class="headerlink" title="ç»“è®ºä¸åæ€"></a>ç»“è®ºä¸åæ€</h3><p><strong>æˆ‘ä»Šå¤©ææ¸…æ¥šäº†</strong>ï¼š</p>
<ul>
<li>Web ä¸­é—´ä»¶çš„é»˜è®¤é…ç½®å­˜åœ¨å¤šç§å®‰å…¨é£é™©ï¼ˆç›®å½•åˆ—å‡ºã€ç‰ˆæœ¬æ³„éœ²ã€ä¸å®‰å…¨æ–¹æ³•ï¼‰</li>
<li>é€šè¿‡ç®€å•çš„é…ç½®ä¿®æ”¹å¯ä»¥æ˜¾è‘—é™ä½æ”»å‡»é¢</li>
<li>å®‰å…¨å“åº”å¤´ï¼ˆX-Frame-Optionsã€X-Content-Type-Options ç­‰ï¼‰å¯ä»¥é˜²å¾¡å¸¸è§ Web æ”»å‡»</li>
<li>è‡ªåŠ¨åŒ–è„šæœ¬å¯ä»¥å¿«é€Ÿæ£€æŸ¥é…ç½®æ˜¯å¦ç¬¦åˆåŸºçº¿è¦æ±‚</li>
</ul>
<p><strong>æˆ‘å·®ç‚¹ææ··çš„æ˜¯</strong>ï¼š</p>
<ul>
<li>ä»¥ä¸º <code>server_tokens off</code> å®Œå…¨éšè— Server å¤´ï¼Œå®é™…ä¸Šåªéšè—ç‰ˆæœ¬å·</li>
<li>æ··æ·†äº† Apache çš„ <code>Options -Indexes</code> å’Œ Nginx çš„ <code>autoindex off</code> è¯­æ³•</li>
<li>æœ€åˆä¸ç†è§£ X-Frame-Options çš„ DENY å’Œ SAMEORIGIN çš„åŒºåˆ«</li>
</ul>
<p><strong>æ˜å¤©æˆ‘è¦ç»§ç»­è¡¥çš„æ˜¯</strong>ï¼š</p>
<ul>
<li>å­¦ä¹  WAFï¼ˆWeb åº”ç”¨é˜²ç«å¢™ï¼‰çš„åŸºç¡€é…ç½®ï¼ˆDay026ï¼‰</li>
<li>äº†è§£ SQL æ³¨å…¥ã€XSS ç­‰å¸¸è§ Web æ¼æ´çš„é˜²æŠ¤ï¼ˆDay027-028ï¼‰</li>
<li>å®æˆ˜ä½¿ç”¨å®‰å…¨æ‰«æå·¥å…·ï¼ˆNiktoã€Wappalyzer ç­‰ï¼‰</li>
</ul>
<p><strong>æœ¬æ¬¡å­¦ä¹ è€—æ—¶</strong>ï¼šçº¦ 3 å°æ—¶</p>
<p><strong>æŒæ¡ç¨‹åº¦è‡ªè¯„</strong>ï¼š</p>
<ul>
<li><input disabled="" type="checkbox"> ğŸ˜• ç†è§£äº†åŸºæœ¬æ¦‚å¿µï¼Œä½†é…ç½®ä¸ç†Ÿç»ƒ</li>
<li><input disabled="" type="checkbox"> ğŸ™‚ å®Œæˆäº†åŸºç¡€é…ç½®ä»»åŠ¡</li>
<li><input disabled="" type="checkbox"> ğŸ˜ƒ å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡å¹¶ç†è§£åŸç†</li>
<li><input disabled="" type="checkbox"> ğŸ¤© ç¼–å†™äº†è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬å¹¶ä¼˜åŒ–äº†é…ç½®</li>
</ul>
<hr>
<h2 id="é›†ä¸­å‚è€ƒç­”æ¡ˆï¼ˆå«æ€è·¯ï¼‰"><a href="#é›†ä¸­å‚è€ƒç­”æ¡ˆï¼ˆå«æ€è·¯ï¼‰" class="headerlink" title="é›†ä¸­å‚è€ƒç­”æ¡ˆï¼ˆå«æ€è·¯ï¼‰"></a>é›†ä¸­å‚è€ƒç­”æ¡ˆï¼ˆå«æ€è·¯ï¼‰</h2><hr>
<h3 id="ç»ƒä¹ -1-å‚è€ƒç­”æ¡ˆï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ"><a href="#ç»ƒä¹ -1-å‚è€ƒç­”æ¡ˆï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ" class="headerlink" title="ç»ƒä¹  1 å‚è€ƒç­”æ¡ˆï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ"></a>ç»ƒä¹  1 å‚è€ƒç­”æ¡ˆï¼šä¸ºä»€ä¹ˆå»ºè®®éšè—ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ</h3><p><strong>æ”»å‡»è€…å¦‚ä½•åˆ©ç”¨ç‰ˆæœ¬ä¿¡æ¯</strong>ï¼š</p>
<ol>
<li><p><strong>ç²¾ç¡®åŒ¹é…å·²çŸ¥æ¼æ´</strong>ï¼š</p>
<ul>
<li>åœ¨ NVD æˆ– Exploit-DB ä¸­æœç´¢ç‰¹å®šç‰ˆæœ¬çš„ CVE</li>
<li>ä¾‹å¦‚ï¼š<code>nginx/1.18.0</code> â†’ æœç´¢ <code>CVE-2021-23017</code></li>
</ul>
</li>
<li><p><strong>å®šåˆ¶æ”»å‡» Payload</strong>ï¼š</p>
<ul>
<li>ä¸åŒç‰ˆæœ¬çš„æ¼æ´åˆ©ç”¨æ–¹å¼å¯èƒ½ä¸åŒ</li>
<li>å·²çŸ¥ç‰ˆæœ¬å·å¯ä»¥æ˜¾è‘—æé«˜æ”»å‡»æˆåŠŸç‡</li>
</ul>
</li>
<li><p><strong>è¯„ä¼°ç»´æŠ¤çŠ¶å†µ</strong>ï¼š</p>
<ul>
<li>ç‰ˆæœ¬è¿‡æ—§è¯´æ˜ç³»ç»Ÿé•¿æœŸæœªæ›´æ–°</li>
<li>å¯èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ªæœªä¿®å¤æ¼æ´</li>
</ul>
</li>
</ol>
<p><strong>éšè—ç‰ˆæœ¬ä¿¡æ¯çš„å±€é™æ€§</strong>ï¼š</p>
<ul>
<li><p><strong>æŒ‡çº¹è¯†åˆ«ä»ç„¶å¯èƒ½</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ HTTP å“åº”ç‰¹å¾ã€é”™è¯¯é¡µé¢ã€è¡Œä¸ºå·®å¼‚æ¨æ–­ç‰ˆæœ¬</li>
<li>ä¾‹å¦‚ï¼šNginx ä¸åŒç‰ˆæœ¬çš„ 404 é¡µé¢ç•¥æœ‰å·®å¼‚</li>
</ul>
</li>
<li><p><strong>ä¸æ˜¯å®Œå…¨çš„é˜²æŠ¤</strong>ï¼š</p>
<ul>
<li>å¦‚æœå­˜åœ¨æ¼æ´ï¼Œæ”»å‡»è€…å¯èƒ½é€šè¿‡æ¢æµ‹å‘ç°</li>
<li>éšè—ç‰ˆæœ¬å±äºâ€è½»åº¦â€é˜²å¾¡æªæ–½</li>
</ul>
</li>
</ul>
<p><strong>æ·±åº¦é˜²å¾¡ï¼ˆDefense in Depthï¼‰ç†å¿µ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¤šå±‚é˜²å¾¡ç­–ç•¥</span><br><span class="line">â”œâ”€ ç¬¬ä¸€å±‚ï¼šéšè—ç‰ˆæœ¬ä¿¡æ¯ï¼ˆé™ä½è¢«é’ˆå¯¹æ€§æ”»å‡»çš„æ¦‚ç‡ï¼‰</span><br><span class="line">â”œâ”€ ç¬¬äºŒå±‚ï¼šåŠæ—¶æ›´æ–°è¡¥ä¸ï¼ˆä¿®å¤å·²çŸ¥æ¼æ´ï¼‰</span><br><span class="line">â”œâ”€ ç¬¬ä¸‰å±‚ï¼šWAF/IPSï¼ˆæ‹¦æˆªæ¶æ„è¯·æ±‚ï¼‰</span><br><span class="line">â”œâ”€ ç¬¬å››å±‚ï¼šç½‘ç»œéš”ç¦»ï¼ˆé™åˆ¶è®¿é—®æ¥æºï¼‰</span><br><span class="line">â””â”€ ç¬¬äº”å±‚ï¼šç›‘æ§å‘Šè­¦ï¼ˆåŠæ—¶å‘ç°å¼‚å¸¸ï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>ç»“è®º</strong>ï¼šéšè—ç‰ˆæœ¬ä¿¡æ¯æ˜¯è‰¯å¥½çš„å®‰å…¨å®è·µï¼Œä½†ä¸èƒ½æ›¿ä»£åŠæ—¶æ›´æ–°å’Œè¡¥ä¸ç®¡ç†ã€‚</p>
<hr>
<h3 id="ç»ƒä¹ -2-å‚è€ƒç­”æ¡ˆï¼šX-Frame-Options-å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ç»ƒä¹ -2-å‚è€ƒç­”æ¡ˆï¼šX-Frame-Options-å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ç»ƒä¹  2 å‚è€ƒç­”æ¡ˆï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ç»ƒä¹  2 å‚è€ƒç­”æ¡ˆï¼šX-Frame-Options å¤´çš„ä¸‰ç§å€¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>ç‚¹å‡»åŠ«æŒï¼ˆClickjackingï¼‰æ”»å‡»åŸç†</strong>ï¼š</p>
<p>æ”»å‡»è€…å°†ç›®æ ‡ç½‘ç«™åµŒå…¥é€æ˜ iframeï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»çœ‹ä¼¼æ— å®³çš„æŒ‰é’®ï¼Œå®é™…æ‰§è¡Œäº†æ•æ„Ÿæ“ä½œï¼ˆå¦‚è½¬è´¦ã€æˆæƒï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ”»å‡»è€…é¡µé¢</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  ğŸ ç‚¹å‡»é¢†å–å…è´¹ç¤¼å“ï¼      â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</span><br><span class="line">â”‚  â”‚  iframe (é€æ˜)        â”‚  â”‚</span><br><span class="line">â”‚  â”‚  [ ç¡®è®¤è½¬è´¦ ]        â”‚  â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">ç”¨æˆ·ç‚¹å‡»&quot;é¢†å–ç¤¼å“&quot; â†’ å®é™…ç‚¹å‡»&quot;ç¡®è®¤è½¬è´¦&quot;</span><br></pre></td></tr></table></figure>

<p><strong>X-Frame-Options ä¸‰ç§å€¼å¯¹æ¯”</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>è§„åˆ™</th>
<th>é€‚ç”¨åœºæ™¯</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>DENY</strong></td>
<td>ç¦æ­¢ä»»ä½•åŸŸååµŒå…¥</td>
<td>é«˜å®‰å…¨æ€§éœ€æ±‚ï¼ˆå¦‚é“¶è¡Œç™»å½•é¡µï¼‰</td>
<td><code>&lt;iframe src=&quot;https://bank.com&quot;&gt;</code> è¢«æ‹’ç»</td>
</tr>
<tr>
<td><strong>SAMEORIGIN</strong></td>
<td>åªå…è®¸åŒæºåŸŸååµŒå…¥</td>
<td>éœ€è¦åœ¨ç«™å†…ä½¿ç”¨ iframe çš„åœºæ™¯</td>
<td><code>example.com</code> å¯åµŒå…¥ <code>example.com</code></td>
</tr>
<tr>
<td><strong>ALLOW-FROM uri</strong></td>
<td>å…è®¸æŒ‡å®šåŸŸååµŒå…¥ï¼ˆå·²åºŸå¼ƒï¼‰</td>
<td>è·¨åŸŸåµŒå…¥éœ€æ±‚ï¼ˆæ—§ç‰ˆæµè§ˆå™¨ï¼‰</td>
<td>å…è®¸ <code>trusted.com</code> åµŒå…¥</td>
</tr>
</tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># DENY ç¤ºä¾‹</span><br><span class="line"><span class="attribute">X-Frame-Options</span><span class="punctuation">: </span>DENY</span><br><span class="line"># ç»“æœï¼šæ‰€æœ‰ iframe åµŒå…¥éƒ½è¢«é˜»æ­¢</span><br><span class="line"></span><br><span class="line"># SAMEORIGIN ç¤ºä¾‹</span><br><span class="line"><span class="attribute">X-Frame-Options</span><span class="punctuation">: </span>SAMEORIGIN</span><br><span class="line"># ç»“æœï¼šä»… example.com å¯åµŒå…¥ example.com çš„é¡µé¢</span><br><span class="line"># example.com åµŒå…¥ other.com è¢«é˜»æ­¢</span><br><span class="line"></span><br><span class="line"># ALLOW-FROM ç¤ºä¾‹ï¼ˆå·²åºŸå¼ƒï¼‰</span><br><span class="line"><span class="attribute">X-Frame-Options</span><span class="punctuation">: </span>ALLOW-FROM https://trusted.com</span><br><span class="line"># ç»“æœï¼šä»… trusted.com å¯åµŒå…¥æ­¤é¡µé¢</span><br></pre></td></tr></table></figure>

<p><strong>ALLOW-FROM å·²åºŸå¼ƒçš„åŸå› </strong>ï¼š</p>
<ul>
<li>æµè§ˆå™¨æ”¯æŒä¸ä¸€è‡´ï¼ˆFirefoxã€Safari ä¸æ”¯æŒï¼‰</li>
<li>CSP çš„ <code>frame-ancestors</code> æä¾›æ›´å¼ºå¤§çš„æ§åˆ¶</li>
</ul>
<p><strong>CSP çš„ <code>frame-ancestors</code> æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># CSP ç¤ºä¾‹</span><br><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>frame-ancestors &#x27;self&#x27; https://trusted.com;</span><br><span class="line"></span><br><span class="line"># ç­‰ä»·äº</span><br><span class="line"># å…è®¸åŒæº + trusted.com åµŒå…¥</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç»ƒä¹ -3-å‚è€ƒç­”æ¡ˆï¼šé…ç½®-Content-Security-Policyï¼ˆCSPï¼‰"><a href="#ç»ƒä¹ -3-å‚è€ƒç­”æ¡ˆï¼šé…ç½®-Content-Security-Policyï¼ˆCSPï¼‰" class="headerlink" title="ç»ƒä¹  3 å‚è€ƒç­”æ¡ˆï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰"></a>ç»ƒä¹  3 å‚è€ƒç­”æ¡ˆï¼šé…ç½® Content-Security-Policyï¼ˆCSPï¼‰</h3><p><strong>CSP å¤´éƒ¨é…ç½®</strong>ï¼š</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>default-src &#x27;self&#x27;;</span><br><span class="line">                              script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;</span><br><span class="line">                              style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; fonts.googleapis.com fonts.gstatic.com;</span><br><span class="line">                              font-src fonts.googleapis.com fonts.gstatic.com;</span><br></pre></td></tr></table></figure>

<p><strong>é€é¡¹è§£é‡Š</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>default-src</strong></td>
<td><code>&#39;self&#39;</code></td>
<td>é»˜è®¤åªå…è®¸åŒæºèµ„æº</td>
</tr>
<tr>
<td><strong>script-src</strong></td>
<td><code>&#39;self&#39; &#39;unsafe-inline&#39;</code></td>
<td>å…è®¸åŒæºè„šæœ¬ + å†…è”è„šæœ¬</td>
</tr>
<tr>
<td><strong>style-src</strong></td>
<td><code>&#39;self&#39; &#39;unsafe-inline&#39; fonts.googleapis.com fonts.gstatic.com</code></td>
<td>å…è®¸åŒæºæ ·å¼ + å†…è”æ ·å¼ + Google Fonts</td>
</tr>
<tr>
<td><strong>font-src</strong></td>
<td><code>fonts.googleapis.com fonts.gstatic.com</code></td>
<td>å…è®¸ä» Google Fonts åŠ è½½å­—ä½“</td>
</tr>
</tbody></table>
<p><strong>å®Œæ•´ç¤ºä¾‹</strong>ï¼ˆNginx é…ç½®ï¼‰ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">add_header</span> Content-Security-Policy <span class="string">&quot;</span></span><br><span class="line"><span class="string">            default-src &#x27;self&#x27;;</span></span><br><span class="line"><span class="string">            script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;</span></span><br><span class="line"><span class="string">            style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; fonts.googleapis.com fonts.gstatic.com;</span></span><br><span class="line"><span class="string">            font-src fonts.googleapis.com fonts.gstatic.com;</span></span><br><span class="line"><span class="string">            img-src &#x27;self&#x27; data:;</span></span><br><span class="line"><span class="string">        &quot;</span> always;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ Report-Only æ¨¡å¼æµ‹è¯•</strong>ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæµ‹è¯•ç­–ç•¥ï¼Œä¸å®é™…é˜»æ­¢</span></span><br><span class="line"><span class="attribute">add_header</span> Content-Security-Policy-Report-Only <span class="string">&quot;</span></span><br><span class="line"><span class="string">    default-src &#x27;self&#x27;;</span></span><br><span class="line"><span class="string">    script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;</span></span><br><span class="line"><span class="string">    style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; fonts.googleapis.com fonts.gstatic.com;</span></span><br><span class="line"><span class="string">    font-src fonts.googleapis.com fonts.gstatic.com;</span></span><br><span class="line"><span class="string">&quot;</span> always;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ¥å‘Šæ¥æ”¶ç«¯ç‚¹</span></span><br><span class="line"><span class="attribute">add_header</span> Report-To <span class="string">&#x27;&#123;&quot;group&quot;:&quot;csp-endpoint&quot;,&quot;max_age&quot;:10886400,&quot;endpoints&quot;:[&#123;&quot;url&quot;:&quot;https://example.com/csp-report&quot;&#125;]&#125;&#x27;</span> always;</span><br></pre></td></tr></table></figure>

<p><strong>CSP ç”Ÿæˆå·¥å…·</strong>ï¼š</p>
<ul>
<li>Mozilla CSP Evaluator: <a target="_blank" rel="noopener" href="https://csp-evaluator.withgoogle.com/">https://csp-evaluator.withgoogle.com/</a></li>
<li>Report URI: <a target="_blank" rel="noopener" href="https://report-uri.com/">https://report-uri.com/</a></li>
</ul>
<hr>
<h3 id="ç»ƒä¹ -4-å‚è€ƒç­”æ¡ˆï¼šHTTP-çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º"><a href="#ç»ƒä¹ -4-å‚è€ƒç­”æ¡ˆï¼šHTTP-çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º" class="headerlink" title="ç»ƒä¹  4 å‚è€ƒç­”æ¡ˆï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º"></a>ç»ƒä¹  4 å‚è€ƒç­”æ¡ˆï¼šHTTP çŠ¶æ€ç ä¸å®‰å…¨åŠ å›º</h3><p><strong>é¢„æœŸçŠ¶æ€ç è¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>HTTP æ–¹æ³•</th>
<th>é¢„æœŸçŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>200 OK</td>
<td>âœ… å…è®¸æ­£å¸¸è®¿é—®</td>
</tr>
<tr>
<td>POST</td>
<td>200 OK</td>
<td>âœ… å…è®¸æäº¤æ•°æ®</td>
</tr>
<tr>
<td>HEAD</td>
<td>200 OK</td>
<td>âœ… å…è®¸è·å–å“åº”å¤´</td>
</tr>
<tr>
<td>TRACE</td>
<td>405 Method Not Allowed</td>
<td>âŒ åº”ç¦æ­¢ï¼ˆè·¨ç«™è¿½è¸ªæ”»å‡»ï¼‰</td>
</tr>
<tr>
<td>PUT</td>
<td>405 Method Not Allowed</td>
<td>âŒ åº”ç¦æ­¢ï¼ˆæ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼‰</td>
</tr>
<tr>
<td>DELETE</td>
<td>405 Method Not Allowed</td>
<td>âŒ åº”ç¦æ­¢ï¼ˆæ–‡ä»¶åˆ é™¤æ¼æ´ï¼‰</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>501 Not Implemented</td>
<td>âš ï¸ é™åˆ¶ï¼ˆæˆ–è¿”å› 405ï¼‰</td>
</tr>
<tr>
<td>PATCH</td>
<td>405 Method Not Allowed</td>
<td>âŒ åº”ç¦æ­¢ï¼ˆéœ€è®¤è¯ï¼‰</td>
</tr>
</tbody></table>
<p><strong>çŠ¶æ€ç è¯´æ˜</strong>ï¼š</p>
<ul>
<li><p><strong>405 Method Not Allowed</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨è¯†åˆ«è¯·æ±‚æ–¹æ³•ï¼Œä½†ä¸å…è®¸ä½¿ç”¨</li>
<li>å¸¸ç”¨äºæ˜ç¡®ç¦æ­¢æŸäº›æ–¹æ³•</li>
<li>å“åº”å¤´åŒ…å« <code>Allow</code> å­—æ®µï¼Œåˆ—å‡ºå…è®¸çš„æ–¹æ³•</li>
</ul>
</li>
<li><p><strong>403 Forbidden</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ç†è§£è¯·æ±‚ï¼Œä½†æ‹’ç»æ‰§è¡Œ</li>
<li>å¸¸ç”¨äºæƒé™ä¸è¶³</li>
<li>å¯ç”¨äºç¦æ­¢æŸäº›æ–¹æ³•ï¼Œä½† 405 æ›´æ˜ç¡®</li>
</ul>
</li>
<li><p><strong>501 Not Implemented</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚æ–¹æ³•</li>
<li>è¡¨ç¤ºæœåŠ¡ç«¯æ ¹æœ¬ä¸å®ç°è¯¥æ–¹æ³•</li>
<li>å¸¸ç”¨äº OPTIONSï¼ˆç¦ç”¨æ—¶ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>éªŒè¯ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 405 å“åº”ç¤ºä¾‹</span></span><br><span class="line">$ curl -X PUT http://localhost/test.txt -v</span><br><span class="line">...</span><br><span class="line">&lt; HTTP/1.1 405 Method Not Allowed</span><br><span class="line">&lt; Server: nginx</span><br><span class="line">&lt; Allow: GET, POST, HEAD</span><br><span class="line">&lt; Content-Length: 178</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 501 å“åº”ç¤ºä¾‹</span></span><br><span class="line">$ curl -X OPTIONS http://localhost/ -v</span><br><span class="line">...</span><br><span class="line">&lt; HTTP/1.1 501 Not Implemented</span><br><span class="line">&lt; Server: nginx</span><br><span class="line">&lt; Content-Length: 153</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><strong>æ¨èåšæ³•</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ <strong>405</strong> æ˜ç¡®å‘ŠçŸ¥å®¢æˆ·ç«¯å“ªäº›æ–¹æ³•è¢«å…è®¸</li>
<li>åœ¨ <code>Allow</code> å“åº”å¤´ä¸­åˆ—å‡ºå…è®¸çš„æ–¹æ³•</li>
<li>åœ¨æœåŠ¡å™¨é…ç½®ä¸­æ˜¾å¼å…è®¸&#x2F;ç¦æ­¢æ–¹æ³•ï¼Œè€Œéä¾èµ–é»˜è®¤è¡Œä¸º</li>
</ol>
<p><strong>Apache é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜ç¡®å…è®¸çš„æ–¹æ³•</span></span><br><span class="line"><span class="section">&lt;LimitExcept GET POST HEAD&gt;</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> denied</span><br><span class="line"><span class="section">&lt;/LimitExcept&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å­¦ä¹ æˆæœç¤ºä¾‹å¡«å†™ï¼ˆå¯ç…§æŠ„ï¼‰"><a href="#å­¦ä¹ æˆæœç¤ºä¾‹å¡«å†™ï¼ˆå¯ç…§æŠ„ï¼‰" class="headerlink" title="å­¦ä¹ æˆæœç¤ºä¾‹å¡«å†™ï¼ˆå¯ç…§æŠ„ï¼‰"></a>å­¦ä¹ æˆæœç¤ºä¾‹å¡«å†™ï¼ˆå¯ç…§æŠ„ï¼‰</h2><blockquote>
<p>å¯å°†â€ç¤ºä¾‹â€å†…å®¹æ›¿æ¢ä¸ºä½ è‡ªå·±çš„æ—¶é—´ä¸æˆªå›¾æ–‡ä»¶åã€‚</p>
</blockquote>
<hr>
<h3 id="æˆªå›¾ä¸è¯æ®ï¼ˆç¤ºä¾‹ï¼‰"><a href="#æˆªå›¾ä¸è¯æ®ï¼ˆç¤ºä¾‹ï¼‰" class="headerlink" title="æˆªå›¾ä¸è¯æ®ï¼ˆç¤ºä¾‹ï¼‰"></a>æˆªå›¾ä¸è¯æ®ï¼ˆç¤ºä¾‹ï¼‰</h3><ul>
<li>ä»»åŠ¡ 1ï¼š<code>images/day025_before_headers.png</code>ï¼ˆåŠ å›ºå‰çš„å“åº”å¤´ï¼‰</li>
<li>ä»»åŠ¡ 1ï¼š<code>images/day025_after_headers.png</code>ï¼ˆåŠ å›ºåçš„å“åº”å¤´ï¼‰</li>
<li>ä»»åŠ¡ 2ï¼š<code>images/day025_nginx_config.png</code>ï¼ˆNginx é…ç½®æ–‡ä»¶ï¼‰</li>
<li>ä»»åŠ¡ 5ï¼š<code>images/day025_script_output.png</code>ï¼ˆè‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬è¾“å‡ºï¼‰</li>
</ul>
<hr>
<h3 id="å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰"><a href="#å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰" class="headerlink" title="å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰"></a>å…³é”®å‘½ä»¤ä¸è¾“å‡ºï¼ˆç¤ºä¾‹ï¼‰</h3><p><strong>Nginx åŠ å›ºå‰åå¯¹æ¯”</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ å›ºå‰</span></span><br><span class="line">$ curl -I http://localhost:8080/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.18.0 (Ubuntu)</span><br><span class="line">Date: Fri, 17 Jan 2026 14:30:00 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å›ºå</span></span><br><span class="line">$ curl -I http://localhost:8080/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Fri, 17 Jan 2026 14:45:00 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">X-XSS-Protection: 1; mode=block</span><br></pre></td></tr></table></figure>

<p><strong>è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬è¾“å‡º</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">============================================================</span><br><span class="line">Web æœåŠ¡å™¨å®‰å…¨åŸºçº¿æ£€æŸ¥æŠ¥å‘Š</span><br><span class="line">ç›®æ ‡: http://localhost:8080</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">âœ… é€šè¿‡é¡¹ (6)</span><br><span class="line">  + ç‰ˆæœ¬ä¿¡æ¯: Server å¤´å·²éšè—ç‰ˆæœ¬å· - &#x27;nginx&#x27;</span><br><span class="line">  + å®‰å…¨å¤´: X-Frame-Options (ç‚¹å‡»åŠ«æŒé˜²æŠ¤) - å·²é…ç½®</span><br><span class="line">  + å®‰å…¨å¤´: X-Content-Type-Options (MIME å—…æ¢é˜²æŠ¤) - å·²é…ç½®</span><br><span class="line">  + å®‰å…¨å¤´: X-XSS-Protection (XSS è¿‡æ»¤å™¨) - å·²é…ç½®</span><br><span class="line">  + å±é™©æ–¹æ³•: TRACE å·²ç¦ç”¨</span><br><span class="line">  + å±é™©æ–¹æ³•: PUT å·²ç¦ç”¨</span><br><span class="line"></span><br><span class="line">âš ï¸  é—®é¢˜é¡¹ (1)</span><br><span class="line">  - å®‰å…¨å¤´ç¼ºå¤±: Content-Security-Policy (å†…å®¹å®‰å…¨ç­–ç•¥)</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">å®‰å…¨è¯„åˆ†: 85.7%</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç»“è®ºä¸åæ€ï¼ˆç¤ºä¾‹ï¼‰"><a href="#ç»“è®ºä¸åæ€ï¼ˆç¤ºä¾‹ï¼‰" class="headerlink" title="ç»“è®ºä¸åæ€ï¼ˆç¤ºä¾‹ï¼‰"></a>ç»“è®ºä¸åæ€ï¼ˆç¤ºä¾‹ï¼‰</h3><p><strong>æˆ‘ä»Šå¤©ææ¸…æ¥šäº†</strong>ï¼š</p>
<ul>
<li>Web ä¸­é—´ä»¶çš„é»˜è®¤é…ç½®å­˜åœ¨å¤šç§å®‰å…¨é£é™©ï¼Œéœ€è¦ä¸»åŠ¨åŠ å›º</li>
<li>éšè—ç‰ˆæœ¬ä¿¡æ¯ã€å…³é—­ç›®å½•åˆ—å‡ºã€é™åˆ¶ HTTP æ–¹æ³•æ˜¯åŸºç¡€åŠ å›ºé¡¹</li>
<li>å®‰å…¨å“åº”å¤´ï¼ˆX-Frame-Optionsã€X-Content-Type-Optionsã€CSPï¼‰å¯ä»¥é˜²å¾¡å¸¸è§ Web æ”»å‡»</li>
<li>å¯ä»¥ç”¨ Python ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬å¿«é€Ÿæ£€æŸ¥é…ç½®åˆè§„æ€§</li>
</ul>
<p><strong>æˆ‘å·®ç‚¹ææ··çš„æ˜¯</strong>ï¼š</p>
<ul>
<li>ä»¥ä¸º <code>X-Frame-Options: ALLOW-FROM</code> æ˜¯æ¨èæ–¹å¼ï¼Œå®é™…ä¸Šå·²è¢«åºŸå¼ƒ</li>
<li>æ··æ·†äº† Nginx çš„ <code>autoindex off</code> å’Œ Apache çš„ <code>Options -Indexes</code> è¯­æ³•</li>
<li>æœ€åˆä¸ç†è§£ CSP çš„ <code>script-src &#39;unsafe-inline&#39;</code> æ˜¯é™ä½å®‰å…¨æ€§ï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ä¸å¾—å·²</li>
</ul>
<p><strong>æ˜å¤©æˆ‘è¦ç»§ç»­è¡¥çš„æ˜¯</strong>ï¼š</p>
<ul>
<li>å­¦ä¹  WAFï¼ˆWeb åº”ç”¨é˜²ç«å¢™ï¼‰çš„åŸºç¡€æ¦‚å¿µä¸é…ç½®ï¼ˆDay026ï¼‰</li>
<li>äº†è§£ SQL æ³¨å…¥ã€XSS ç­‰å¸¸è§ Web æ¼æ´çš„æ”»å‡»ä¸é˜²å¾¡ï¼ˆDay027-028ï¼‰</li>
<li>å®æˆ˜ä½¿ç”¨å®‰å…¨æ‰«æå·¥å…·ï¼ˆNiktoã€Wappalyzerã€Nucleiï¼‰</li>
</ul>
<p><strong>æœ¬æ¬¡å­¦ä¹ è€—æ—¶</strong>ï¼šçº¦ 3.5 å°æ—¶</p>
<p><strong>æŒæ¡ç¨‹åº¦è‡ªè¯„</strong>ï¼š</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> ğŸ˜ƒ å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡å¹¶ç†è§£åŸç†</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"># ç½‘ç»œ</a>
              <a href="/tags/%E5%AE%89%E5%85%A8/" rel="tag"># å®‰å…¨</a>
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="tag"># å­¦ä¹ è®¡åˆ’</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/87578fee.html" rel="prev" title="Day024ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - ç³»ç»ŸåŸºçº¿ä¸å®¡è®¡">
                  <i class="fa fa-chevron-left"></i> Day024ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - ç³»ç»ŸåŸºçº¿ä¸å®¡è®¡
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/99362a3b.html" rel="next" title="Day026ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - è‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥ä¸æŠ¥å‘Š">
                  Day026ï¼šæ¼æ´æ‰«æä¸åŸºçº¿ - è‡ªåŠ¨åŒ–åŸºçº¿æ£€æŸ¥ä¸æŠ¥å‘Š <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zNDY4NC8xMTIyMQ=="></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tigercoll</span>
</div>
<!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® -->
<span id="timeDate">è½½å…¥å¤©æ•°...</span>
<span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("04/21/2019 15:54:40");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "ç­‰å¾…ä¸ä½ ç›¸é‡çš„ "+dnum+" å¤© ";
        document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
    }
setInterval("createtime()",250);
</script>
<!--
-->

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




<script src="/js/third-party/comments/livere.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
